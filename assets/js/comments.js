/*! Wiki.js - wiki.js.org - Licensed under AGPL */
(this.webpackJsonp=this.webpackJsonp||[]).push([["comments"],{"./client/components/comments.vue":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"intersect",rawName:"v-intersect.once",value:e.onIntersect,expression:"onIntersect",modifiers:{once:!0}}]},[e.permissions.write?n("v-textarea",{attrs:{id:"discussion-new",outlined:"",flat:"",placeholder:e.$t("common:comments.newPlaceholder"),"auto-grow":"",dense:"",rows:"3","hide-details":"",color:"blue-grey darken-2","background-color":e.$vuetify.theme.dark?"grey darken-5":"white","aria-label":e.$t("common:comments.fieldContent")},model:{value:e.newcomment,callback:function(t){e.newcomment=t},expression:"newcomment"}}):e._e(),!e.isAuthenticated&&e.permissions.write?n("v-row",{staticClass:"mt-2",attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",lg:"6"}},[n("v-text-field",{attrs:{outlined:"",color:"blue-grey darken-2","background-color":e.$vuetify.theme.dark?"grey darken-5":"white",placeholder:e.$t("common:comments.fieldName"),"hide-details":"",dense:"",autocomplete:"name","aria-label":e.$t("common:comments.fieldName")},model:{value:e.guestName,callback:function(t){e.guestName=t},expression:"guestName"}})],1),n("v-col",{attrs:{cols:"12",lg:"6"}},[n("v-text-field",{attrs:{outlined:"",color:"blue-grey darken-2","background-color":e.$vuetify.theme.dark?"grey darken-5":"white",placeholder:e.$t("common:comments.fieldEmail"),"hide-details":"",type:"email",dense:"",autocomplete:"email","aria-label":e.$t("common:comments.fieldEmail")},model:{value:e.guestEmail,callback:function(t){e.guestEmail=t},expression:"guestEmail"}})],1)],1):e._e(),e.permissions.write?n("div",{staticClass:"d-flex align-center pt-3"},[n("v-icon",{staticClass:"mr-1",attrs:{color:"blue-grey"}},[e._v("mdi-language-markdown-outline")]),n("div",{staticClass:"caption blue-grey--text"},[e._v(e._s(e.$t("common:comments.markdownFormat")))]),n("v-spacer"),e.isAuthenticated?n("div",{staticClass:"caption mr-3"},[n("i18next",{attrs:{tag:"span",path:"common:comments.postingAs"}},[n("strong",{attrs:{place:"name"}},[e._v(e._s(e.userDisplayName))])])],1):e._e(),n("v-btn",{attrs:{dark:"",color:"blue-grey darken-2",depressed:"","aria-label":e.$t("common:comments.postComment")},on:{click:e.postComment}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-comment")]),n("span",{staticClass:"text-none"},[e._v(e._s(e.$t("common:comments.postComment")))])],1)],1):e._e(),e.permissions.write?n("v-divider",{staticClass:"mt-3"}):e._e(),e.isLoading&&!e.hasLoadedOnce?n("div",{staticClass:"pa-5 d-flex align-center justify-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"20",width:"1",color:"blue-grey"}}),n("div",{staticClass:"caption blue-grey--text pl-3"},[n("em",[e._v(e._s(e.$t("common:comments.loading")))])])],1):e.comments&&e.comments.length>0?n("v-timeline",{attrs:{dense:""}},e._l(e.comments,(function(t){return n("v-timeline-item",{key:"comment-"+t.id,staticClass:"comments-post",attrs:{color:"pink darken-4",large:"",id:"comment-post-id-"+t.id},scopedSlots:e._u([{key:"icon",fn:function(){return[n("v-avatar",{attrs:{color:"blue-grey"}},[n("span",{staticClass:"white--text title"},[e._v(e._s(t.initials))])])]},proxy:!0}],null,!0)},[n("v-card",{staticClass:"elevation-1"},[n("v-card-text",[e.permissions.manage&&!e.isBusy&&0===e.commentEditId?n("div",{staticClass:"comments-post-actions"},[n("v-icon",{staticClass:"mr-3",attrs:{small:""},on:{click:function(n){return e.editComment(t)}}},[e._v("mdi-pencil")]),n("v-icon",{attrs:{small:""},on:{click:function(n){return e.deleteCommentConfirm(t)}}},[e._v("mdi-delete")])],1):e._e(),n("div",{staticClass:"comments-post-name caption"},[n("strong",[e._v(e._s(t.authorName))])]),n("div",{staticClass:"comments-post-date overline grey--text"},[e._v(e._s(e._f("moment")(t.createdAt,"from"))+" "),t.createdAt!==t.updatedAt?n("em",[e._v("- "+e._s(e.$t("common:comments.modified",{reldate:e.$options.filters.moment(t.updatedAt,"from")})))]):e._e()]),e.commentEditId!==t.id?n("div",{staticClass:"comments-post-content mt-3",domProps:{innerHTML:e._s(t.render)}}):n("div",{staticClass:"comments-post-editcontent mt-3"},[n("v-textarea",{attrs:{outlined:"",flat:"","auto-grow":"",dense:"",rows:"3","hide-details":"",color:"blue-grey darken-2","background-color":e.$vuetify.theme.dark?"grey darken-5":"white"},model:{value:e.commentEditContent,callback:function(t){e.commentEditContent=t},expression:"commentEditContent"}}),n("div",{staticClass:"d-flex align-center pt-3"},[n("v-spacer"),n("v-btn",{staticClass:"mr-3",attrs:{dark:"",color:"blue-grey darken-2",outlined:""},on:{click:e.editCommentCancel}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),n("span",{staticClass:"text-none"},[e._v(e._s(e.$t("common:actions.cancel")))])],1),n("v-btn",{attrs:{dark:"",color:"blue-grey darken-2",depressed:""},on:{click:e.updateComment}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-comment")]),n("span",{staticClass:"text-none"},[e._v(e._s(e.$t("common:comments.updateComment")))])],1)],1)],1)])],1)],1)})),1):e.permissions.write?n("div",{staticClass:"pt-5 text-center body-2 blue-grey--text"},[e._v(e._s(e.$t("common:comments.beFirst")))]):n("div",{staticClass:"text-center body-2 blue-grey--text"},[e._v(e._s(e.$t("common:comments.none")))]),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.deleteCommentDialogShown,callback:function(t){e.deleteCommentDialogShown=t},expression:"deleteCommentDialogShown"}},[n("v-card",[n("div",{staticClass:"dialog-header is-red"},[e._v(e._s(e.$t("common:comments.deleteConfirmTitle")))]),n("v-card-text",{staticClass:"pt-5"},[n("span",[e._v(e._s(e.$t("common:comments.deleteWarn")))]),n("div",{staticClass:"caption"},[n("strong",[e._v(e._s(e.$t("common:comments.deletePermanentWarn")))])])]),n("v-card-chin",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteCommentDialogShown=!1}}},[e._v(e._s(e.$t("common:actions.cancel")))]),n("v-btn",{attrs:{color:"red",dark:""},on:{click:e.deleteComment}},[e._v(e._s(e.$t("common:actions.delete")))])],1)],1)],1)],1)};i._withStripped=!0;var o=n("./node_modules/lodash/reject.js"),a=n.n(o),s=n("./node_modules/lodash/find.js"),r=n.n(s),l=n("./node_modules/lodash/last.js"),d=n.n(l),c=n("./node_modules/lodash/head.js"),m=n.n(c),u=n("./node_modules/lodash/get.js"),v=n.n(u),p=n("./node_modules/vuex-pathify/dist/vuex-pathify.js"),f=n("./node_modules/validate.js/validate.js"),g=n.n(f);function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",r=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof g?t:g,s=Object.create(a.prototype),r=new E(i||[]);return o(s,"_invoke",{value:j(e,n,r)}),s}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var u="suspendedStart",v="executing",p="completed",f={};function g(){}function h(){}function y(){}var b={};d(b,s,(function(){return this}));var N=Object.getPrototypeOf,_=N&&N(N(T([])));_&&_!==n&&i.call(_,s)&&(b=_);var w=y.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,s,r){var l=m(e[o],e,a);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==typeof c&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,r)}),(function(e){n("throw",e,s,r)})):t.resolve(c).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,r)}))}r(l.arg)}var a;o(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,o){n(e,i,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,n,i){var o=u;return function(a,s){if(o===v)throw Error("Generator is already running");if(o===p){if("throw"===a)throw s;return{value:e,done:!0}}for(i.method=a,i.arg=s;;){var r=i.delegate;if(r){var l=C(r,i);if(l){if(l===f)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===u)throw o=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=v;var d=m(t,n,i);if("normal"===d.type){if(o=i.done?p:"suspendedYield",d.arg===f)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(o=p,i.method="throw",i.arg=d.arg)}}}function C(t,n){var i=n.method,o=t.iterator[i];if(o===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),f;var a=m(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var s=a.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return h.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:h,configurable:!0}),h.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},x(S.prototype),d(S.prototype,r,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,o,a){void 0===a&&(a=Promise);var s=new S(c(e,n,i,o),a);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(w),d(w,l,"Generator"),d(w,s,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=T,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(i,o){return r.type="throw",r.arg=t,n.next=i,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],r=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),d=i.call(s,"finallyLoc");if(l&&d){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),$(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;$(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:T(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),f}},t}function h(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){h(a,i,o,s,r,"next",e)}function r(e){h(a,i,o,s,r,"throw",e)}s(void 0)}))}}var b={data:function(){return{newcomment:"",isLoading:!0,hasLoadedOnce:!1,comments:[],guestName:"",guestEmail:"",commentToDelete:{},commentEditId:0,commentEditContent:null,deleteCommentDialogShown:!1,isBusy:!1,scrollOpts:{duration:1500,offset:0,easing:"easeInOutCubic"}}},computed:{pageId:Object(p.get)("page/id"),permissions:Object(p.get)("page/effectivePermissions@comments"),isAuthenticated:Object(p.get)("user/authenticated"),userDisplayName:Object(p.get)("user/name")},methods:{onIntersect:function(e,t,n){n&&this.fetch(!0)},fetch:function(e){var t=this;return y(k().mark((function n(){var i;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===e&&(e=!1),t.isLoading=!0,n.prev=2,n.next=5,t.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"list"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}},{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"render"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:323,source:{body:"\n            query ($locale: String!, $path: String!) {\n              comments {\n                list(locale: $locale, path: $path) {\n                  id\n                  render\n                  authorName\n                  createdAt\n                  updatedAt\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{locale:t.$store.get("page/locale"),path:t.$store.get("page/path")},fetchPolicy:"network-only"});case 5:i=n.sent,t.comments=v()(i,"data.comments.list",[]).map((function(e){var t=e.authorName.toUpperCase().split(" "),n=m()(t).charAt(0);return t.length>1&&(n+=d()(t).charAt(0)),e.initials=n,e})),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),console.warn(n.t0),e||t.$store.commit("showNotification",{style:"red",message:n.t0.message,icon:"alert"});case 13:t.isLoading=!1,t.hasLoadedOnce=!0;case 15:case"end":return n.stop()}}),n,null,[[2,9]])})))()},postComment:function(){var e=this;return y(k().mark((function t(){var n,i,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={comment:{presence:{allowEmpty:!1},length:{minimum:2}}},!e.isAuthenticated&&e.permissions.write&&(n.name={presence:{allowEmpty:!1},length:{minimum:2,maximum:255}},n.email={presence:{allowEmpty:!1},email:!0}),!(i=g()({comment:e.newcomment,name:e.guestName,email:e.guestEmail},n,{format:"flat"}))){t.next=6;break}return e.$store.commit("showNotification",{style:"red",message:i[0],icon:"alert"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"replyTo"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"guestName"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"guestEmail"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"Argument",name:{kind:"Name",value:"replyTo"},value:{kind:"Variable",name:{kind:"Name",value:"replyTo"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"guestName"},value:{kind:"Variable",name:{kind:"Name",value:"guestName"}}},{kind:"Argument",name:{kind:"Name",value:"guestEmail"},value:{kind:"Variable",name:{kind:"Name",value:"guestEmail"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:700,source:{body:"\n            mutation (\n              $pageId: Int!\n              $replyTo: Int\n              $content: String!\n              $guestName: String\n              $guestEmail: String\n            ) {\n              comments {\n                create (\n                  pageId: $pageId\n                  replyTo: $replyTo\n                  content: $content\n                  guestName: $guestName\n                  guestEmail: $guestEmail\n                ) {\n                  responseResult {\n                    succeeded\n                    errorCode\n                    slug\n                    message\n                  }\n                  id\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{pageId:e.pageId,replyTo:0,content:e.newcomment,guestName:e.guestName,guestEmail:e.guestEmail}});case 9:if(o=t.sent,!v()(o,"data.comments.create.responseResult.succeeded",!1)){t.next=18;break}return e.$store.commit("showNotification",{style:"success",message:e.$t("common:comments.postSuccess"),icon:"check"}),e.newcomment="",t.next=15,e.fetch();case 15:e.$nextTick((function(){e.$vuetify.goTo("#comment-post-id-"+v()(o,"data.comments.create.id",0),e.scrollOpts)})),t.next=19;break;case 18:throw new Error(v()(o,"data.comments.create.responseResult.message","An unexpected error occurred."));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"});case 24:case"end":return t.stop()}}),t,null,[[6,21]])})))()},editComment:function(e){var t=this;return y(k().mark((function n(){var i;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.$store.commit("loadingStart","comments-edit"),t.isBusy=!0,n.prev=2,n.next=5,t.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"single"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:176,source:{body:"\n            query ($id: Int!) {\n              comments {\n                single(id: $id) {\n                  content\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{id:e.id},fetchPolicy:"network-only"});case 5:if(i=n.sent,t.commentEditContent=v()(i,"data.comments.single.content",null),null!==t.commentEditContent){n.next=9;break}throw new Error("Failed to load comment content.");case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.warn(n.t0),t.$store.commit("showNotification",{style:"red",message:n.t0.message,icon:"alert"});case 15:t.commentEditId=e.id,t.isBusy=!1,t.$store.commit("loadingStop","comments-edit");case 18:case"end":return n.stop()}}),n,null,[[2,11]])})))()},editCommentCancel:function(){this.commentEditId=0,this.commentEditContent=null},updateComment:function(){var e=this;return y(k().mark((function t(){var n,i;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.commit("loadingStart","comments-edit"),e.isBusy=!0,t.prev=2,!(e.commentEditContent.length<2)){t.next=5;break}throw new Error(e.$t("common:comments.contentMissingError"));case 5:return t.next=7,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"render"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:480,source:{body:"\n            mutation (\n              $id: Int!\n              $content: String!\n            ) {\n              comments {\n                update (\n                  id: $id,\n                  content: $content\n                ) {\n                  responseResult {\n                    succeeded\n                    errorCode\n                    slug\n                    message\n                  }\n                  render\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{id:e.commentEditId,content:e.commentEditContent}});case 7:if(n=t.sent,!v()(n,"data.comments.update.responseResult.succeeded",!1)){t.next=16;break}e.$store.commit("showNotification",{style:"success",message:e.$t("common:comments.updateSuccess"),icon:"check"}),(i=r()(e.comments,["id",e.commentEditId])).render=v()(n,"data.comments.update.render","-- Failed to load updated comment --"),i.updatedAt=(new Date).toISOString(),e.editCommentCancel(),t.next=17;break;case 16:throw new Error(v()(n,"data.comments.delete.responseResult.message","An unexpected error occurred."));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.warn(t.t0),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"});case 23:e.isBusy=!1,e.$store.commit("loadingStop","comments-edit");case 25:case"end":return t.stop()}}),t,null,[[2,19]])})))()},deleteCommentConfirm:function(e){this.commentToDelete=e,this.deleteCommentDialogShown=!0},deleteComment:function(){var e=this;return y(k().mark((function t(){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.commit("loadingStart","comments-delete"),e.isBusy=!0,e.deleteCommentDialogShown=!1,t.prev=3,t.next=6,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:386,source:{body:"\n            mutation (\n              $id: Int!\n            ) {\n              comments {\n                delete (\n                  id: $id\n                ) {\n                  responseResult {\n                    succeeded\n                    errorCode\n                    slug\n                    message\n                  }\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{id:e.commentToDelete.id}});case 6:if(n=t.sent,!v()(n,"data.comments.delete.responseResult.succeeded",!1)){t.next=12;break}e.$store.commit("showNotification",{style:"success",message:e.$t("common:comments.deleteSuccess"),icon:"check"}),e.comments=a()(e.comments,["id",e.commentToDelete.id]),t.next=13;break;case 12:throw new Error(v()(n,"data.comments.delete.responseResult.message","An unexpected error occurred."));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"});case 18:e.isBusy=!1,e.$store.commit("loadingStop","comments-delete");case 20:case"end":return t.stop()}}),t,null,[[3,15]])})))()}}},N=(n("./client/components/comments.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),_=n("./node_modules/vuetify-loader/lib/runtime/installComponents.js"),w=n.n(_),x=n("./node_modules/vuetify/lib/components/VAvatar/VAvatar.js"),S=n("./node_modules/vuetify/lib/components/VBtn/VBtn.js"),j=n("./node_modules/vuetify/lib/components/VCard/VCard.js"),C=n("./node_modules/vuetify/lib/components/VCard/index.js"),V=n("./node_modules/vuetify/lib/components/VGrid/VCol.js"),$=n("./node_modules/vuetify/lib/components/VDialog/VDialog.js"),E=n("./node_modules/vuetify/lib/components/VDivider/VDivider.js"),T=n("./node_modules/vuetify/lib/components/VIcon/VIcon.js"),D=n("./node_modules/vuetify/lib/components/VProgressCircular/VProgressCircular.js"),F=n("./node_modules/vuetify/lib/components/VGrid/VRow.js"),L=n("./node_modules/vuetify/lib/components/VGrid/VSpacer.js"),I=n("./node_modules/vuetify/lib/components/VTextField/VTextField.js"),O=n("./node_modules/vuetify/lib/components/VTextarea/VTextarea.js"),A=n("./node_modules/vuetify/lib/components/VTimeline/VTimeline.js"),P=n("./node_modules/vuetify/lib/components/VTimeline/VTimelineItem.js"),G=n("./node_modules/vuetify-loader/lib/runtime/installDirectives.js"),R=n.n(G),q=n("./node_modules/vuetify/lib/directives/intersect/index.js"),B=Object(N.a)(b,i,[],!1,null,null,null);w()(B,{VAvatar:x.a,VBtn:S.a,VCard:j.a,VCardText:C.b,VCol:V.a,VDialog:$.a,VDivider:E.a,VIcon:T.a,VProgressCircular:D.a,VRow:F.a,VSpacer:L.a,VTextField:I.a,VTextarea:O.a,VTimeline:A.a,VTimelineItem:P.a}),R()(B,{Intersect:q.a}),B.options.__file="client/components/comments.vue";t.default=B.exports},"./client/components/comments.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n("./node_modules/cache-loader/dist/cjs.js?!./node_modules/style-loader/dist/cjs.js!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/comments.vue?vue&type=style&index=0&lang=scss&")},"./node_modules/cache-loader/dist/cjs.js?!./node_modules/style-loader/dist/cjs.js!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/comments.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){var i=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/comments.vue?vue&type=style&index=0&lang=scss&");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);e.exports=o.locals||{}},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/comments.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){}}]);