/*! Wiki.js - wiki.js.org - Licensed under AGPL */
(this.webpackJsonp=this.webpackJsonp||[]).push([["login"],{"./client/components/login.vue":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("div",{staticClass:"login",style:"background-image: url("+e.bgUrl+");"},[n("div",{staticClass:"login-sd"},[n("div",{staticClass:"d-flex mb-5"},[n("div",{staticClass:"login-logo"},[n("v-avatar",{attrs:{tile:"",size:"34"}},[n("v-img",{attrs:{src:e.logoUrl}})],1)],1),n("div",{staticClass:"login-title"},[n("div",{staticClass:"text-h6 grey--text text--darken-4"},[e._v(e._s(e.siteTitle))])])]),n("v-alert",{staticClass:"mb-0",attrs:{transition:"slide-y-reverse-transition",color:"red darken-2",tile:"",dark:"",dense:"",icon:"mdi-alert"},model:{value:e.errorShown,callback:function(t){e.errorShown=t},expression:"errorShown"}},[n("div",{staticClass:"body-2"},[e._v(e._s(e.errorMessage))])]),"login"===e.screen&&e.strategies.length>1?[n("div",{staticClass:"login-subtitle"},[n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.$t("auth:selectAuthProvider")))])]),n("div",{staticClass:"login-list"},[n("v-list",{staticClass:"elevation-1 radius-7",attrs:{nav:"",light:""}},[n("v-list-item-group",{model:{value:e.selectedStrategyKey,callback:function(t){e.selectedStrategyKey=t},expression:"selectedStrategyKey"}},e._l(e.filteredStrategies,(function(t,i){return n("v-list-item",{key:t.key,attrs:{value:t.key,color:t.strategy.color}},[n("v-avatar",{staticClass:"mr-3",attrs:{tile:"",size:"24"},domProps:{innerHTML:e._s(t.strategy.icon)}}),n("span",{staticClass:"text-none"},[e._v(e._s(t.displayName))])],1)})),1)],1)],1)]:e._e(),"login"===e.screen&&e.selectedStrategy.strategy.useForm?[n("div",{staticClass:"login-subtitle"},[n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.$t("auth:enterCredentials")))])]),n("div",{staticClass:"login-form"},[n("v-text-field",{ref:"iptEmail",attrs:{solo:"",flat:"","prepend-inner-icon":"mdi-clipboard-account","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.isUsernameEmail?e.$t("auth:fields.email"):e.$t("auth:fields.username"),type:e.isUsernameEmail?"email":"text",autocomplete:e.isUsernameEmail?"email":"username",light:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{ref:"iptPassword",staticClass:"mt-2",attrs:{solo:"",flat:"","prepend-inner-icon":"mdi-form-textbox-password","background-color":"white",color:"blue darken-2","hide-details":"","append-icon":e.hidePassword?"mdi-eye-off":"mdi-eye",type:e.hidePassword?"password":"text",placeholder:e.$t("auth:fields.password"),autocomplete:"current-password",light:""},on:{"click:append":function(){return e.hidePassword=!e.hidePassword},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{staticClass:"mt-2 text-none",attrs:{width:"100%",large:"",color:"blue darken-2",dark:"",loading:e.isLoading},on:{click:e.login}},[e._v(e._s(e.$t("auth:actions.login")))]),n("div",{staticClass:"text-center mt-5"},[n("v-btn",{staticClass:"text-none",attrs:{text:"",rounded:"",color:"grey darken-3",href:"#forgot"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.forgotPassword.apply(null,arguments)}}},[n("div",{staticClass:"caption"},[e._v(e._s(e.$t("auth:forgotPasswordLink")))])]),"local"===e.selectedStrategyKey&&e.selectedStrategy.selfRegistration?n("v-btn",{staticClass:"text-none",attrs:{color:"indigo darken-2",text:"",rounded:"",href:"/register"}},[n("div",{staticClass:"caption"},[e._v(e._s(e.$t("auth:switchToRegister.link")))])]):e._e()],1)],1)]:e._e(),"forgot"===e.screen?[n("div",{staticClass:"login-subtitle"},[n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.$t("auth:forgotPasswordTitle")))])]),n("div",{staticClass:"login-info"},[e._v(e._s(e.$t("auth:forgotPasswordSubtitle")))]),n("div",{staticClass:"login-form"},[n("v-text-field",{ref:"iptForgotPwdEmail",attrs:{solo:"",flat:"","prepend-inner-icon":"mdi-clipboard-account","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.$t("auth:fields.email"),type:"email",autocomplete:"email",light:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-btn",{staticClass:"mt-2 text-none",attrs:{width:"100%",large:"",color:"blue darken-2",dark:"",loading:e.isLoading},on:{click:e.forgotPasswordSubmit}},[e._v(e._s(e.$t("auth:sendResetPassword")))]),n("div",{staticClass:"text-center mt-5"},[n("v-btn",{staticClass:"text-none",attrs:{text:"",rounded:"",color:"grey darken-3",href:"#forgot"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.screen="login"}}},[n("div",{staticClass:"caption"},[e._v(e._s(e.$t("auth:forgotPasswordCancel")))])])],1)],1)]:e._e(),"changePwd"===e.screen?[n("div",{staticClass:"login-subtitle"},[n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.$t("auth:changePwd.subtitle")))])]),n("div",{staticClass:"login-form"},[n("v-text-field",{ref:"iptNewPassword",staticClass:"mt-2",attrs:{type:"password",solo:"",flat:"","prepend-inner-icon":"mdi-form-textbox-password","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.$t("auth:changePwd.newPasswordPlaceholder"),autocomplete:"new-password",light:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}},[n("password-strength",{attrs:{slot:"progress"},slot:"progress",model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),n("v-text-field",{staticClass:"mt-2",attrs:{type:"password",solo:"",flat:"","prepend-inner-icon":"mdi-form-textbox-password","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.$t("auth:changePwd.newPasswordVerifyPlaceholder"),autocomplete:"new-password",light:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changePassword.apply(null,arguments)}},model:{value:e.newPasswordVerify,callback:function(t){e.newPasswordVerify=t},expression:"newPasswordVerify"}}),n("v-btn",{staticClass:"mt-2 text-none",attrs:{width:"100%",large:"",color:"blue darken-2",dark:"",loading:e.isLoading},on:{click:e.changePassword}},[e._v(e._s(e.$t("auth:changePwd.proceed")))])],1)]:e._e()],2)]),n("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.isTFAShown,callback:function(t){e.isTFAShown=t},expression:"isTFAShown"}},[n("v-card",[n("div",{staticClass:"login-tfa text-center pa-5 grey--text text--darken-3"},[n("img",{attrs:{src:"_assets/svg/icon-pin-pad.svg"}}),n("div",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("auth:tfaFormTitle")))]),n("v-text-field",{ref:"iptTFA",staticClass:"login-tfa-field mt-2",attrs:{solo:"",flat:"","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.$t("auth:tfa.placeholder"),autocomplete:"one-time-code",light:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifySecurityCode(!1)}},model:{value:e.securityCode,callback:function(t){e.securityCode=t},expression:"securityCode"}}),n("v-btn",{staticClass:"mt-2 text-none",attrs:{width:"100%",large:"",color:"blue darken-2",dark:"",loading:e.isLoading},on:{click:function(t){return e.verifySecurityCode(!1)}}},[e._v(e._s(e.$t("auth:tfa.verifyToken")))])],1)])],1),n("v-dialog",{attrs:{"max-width":"600",persistent:""},model:{value:e.isTFASetupShown,callback:function(t){e.isTFASetupShown=t},expression:"isTFASetupShown"}},[n("v-card",[n("div",{staticClass:"login-tfa text-center pa-5 grey--text text--darken-3"},[n("div",{staticClass:"subtitle-1 primary--text"},[e._v(e._s(e.$t("auth:tfaSetupTitle")))]),n("v-divider",{staticClass:"my-5"}),n("div",{staticClass:"subtitle-2"},[e._v(e._s(e.$t("auth:tfaSetupInstrFirst")))]),n("div",{staticClass:"caption"},[e._v("("),n("a",{attrs:{href:"https://authy.com/",target:"_blank",noopener:""}},[e._v("Authy")]),e._v(", "),n("a",{attrs:{href:"https://support.google.com/accounts/answer/1066447",target:"_blank",noopener:""}},[e._v("Google Authenticator")]),e._v(", "),n("a",{attrs:{href:"https://www.microsoft.com/en-us/account/authenticator",target:"_blank",noopener:""}},[e._v("Microsoft Authenticator")]),e._v(", etc.)")]),e.isTFASetupShown?n("div",{staticClass:"login-tfa-qr mt-5",domProps:{innerHTML:e._s(e.tfaQRImage)}}):e._e(),n("div",{staticClass:"subtitle-2 mt-5"},[e._v(e._s(e.$t("auth:tfaSetupInstrSecond")))]),n("v-text-field",{ref:"iptTFASetup",staticClass:"login-tfa-field mt-2",attrs:{solo:"",flat:"","background-color":"white",color:"blue darken-2","hide-details":"",placeholder:e.$t("auth:tfa.placeholder"),autocomplete:"one-time-code",light:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifySecurityCode(!0)}},model:{value:e.securityCode,callback:function(t){e.securityCode=t},expression:"securityCode"}}),n("v-btn",{staticClass:"mt-2 text-none",attrs:{width:"100%",large:"",color:"blue darken-2",dark:"",loading:e.isLoading},on:{click:function(t){return e.verifySecurityCode(!0)}}},[e._v(e._s(e.$t("auth:tfa.verifyToken")))])],1)])],1),n("loader",{attrs:{color:e.loaderColor,title:e.loaderTitle,subtitle:e.$t("auth:pleaseWait")},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),n("notify",{staticStyle:{"padding-top":"64px"}})],1)};i._withStripped=!0;var a=n("./node_modules/lodash/sortBy.js"),o=n.n(a),s=n("./node_modules/lodash/delay.js"),r=n.n(s),l=n("./node_modules/lodash/get.js"),d=n.n(l),c=n("./node_modules/lodash/has.js"),u=n.n(c),m=n("./node_modules/lodash/find.js"),v=n.n(m),g=n("./node_modules/lodash/head.js"),p=n.n(g),h=n("./node_modules/lodash/reject.js"),k=n.n(h),f=n("./node_modules/js-cookie/src/js.cookie.js"),y=n.n(f),w=n("./node_modules/vuex-pathify/dist/vuex-pathify.js");function b(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */b=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),r=new j(i||[]);return a(s,"_invoke",{value:C(e,n,r)}),s}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",v="executing",g="completed",p={};function h(){}function k(){}function f(){}var y={};d(y,s,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w($([])));S&&S!==n&&i.call(S,s)&&(y=S);var x=f.prototype=h.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(a,o,s,r){var l=u(e[a],e,o);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==typeof c&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,r)}),(function(e){n("throw",e,s,r)})):t.resolve(c).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,r)}))}r(l.arg)}var o;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,a){n(e,i,t,a)}))}return o=o?o.then(a,a):a()}})}function C(t,n,i){var a=m;return function(o,s){if(a===v)throw Error("Generator is already running");if(a===g){if("throw"===o)throw s;return{value:e,done:!0}}for(i.method=o,i.arg=s;;){var r=i.delegate;if(r){var l=T(r,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===m)throw a=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=v;var d=u(t,n,i);if("normal"===d.type){if(a=i.done?g:"suspendedYield",d.arg===p)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(a=g,i.method="throw",i.arg=d.arg)}}}function T(t,n){var i=n.method,a=t.iterator[i];if(a===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),p;var o=u(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(i.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return k.prototype=f,a(x,"constructor",{value:f,configurable:!0}),a(f,"constructor",{value:k,configurable:!0}),k.displayName=d(f,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(N.prototype),d(N.prototype,r,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,i,a,o){void 0===o&&(o=Promise);var s=new N(c(e,n,i,a),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(x),d(x,l,"Generator"),d(x,s,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=$,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(i,a){return r.type="throw",r.arg=t,n.next=i,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),d=i.call(s,"finallyLoc");if(l&&d){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:$(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),p}},t}function S(e,t,n,i,a,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(i,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){S(o,i,a,s,r,"next",e)}function r(e){S(o,i,a,s,r,"throw",e)}s(void 0)}))}}var _={i18nOptions:{namespaces:"auth"},props:{bgUrl:{type:String,default:""},hideLocal:{type:Boolean,default:!1},changePwdContinuationToken:{type:String,default:null}},data:function(){return{error:!1,strategies:[],selectedStrategyKey:"unselected",selectedStrategy:{key:"unselected",strategy:{useForm:!1,usernameType:"email"}},screen:"login",username:"",password:"",hidePassword:!0,securityCode:"",continuationToken:"",isLoading:!1,loaderColor:"grey darken-4",loaderTitle:"Working...",isShown:!1,newPassword:"",newPasswordVerify:"",isTFAShown:!1,isTFASetupShown:!1,tfaQRImage:"",errorShown:!1,errorMessage:""}},computed:{activeModal:Object(w.sync)("editor/activeModal"),siteTitle:function(){return siteConfig.title},isSocialShown:function(){return this.strategies.length>1},logoUrl:function(){return siteConfig.logoUrl},filteredStrategies:function(){var e=new URLSearchParams(window.location.search);return this.hideLocal&&!e.has("all")?k()(this.strategies,["key","local"]):this.strategies},isUsernameEmail:function(){return"email"===this.selectedStrategy.strategy.usernameType}},watch:{filteredStrategies:function(e,t){p()(e).strategy.useForm&&(this.selectedStrategyKey=p()(e).key)},selectedStrategyKey:function(e,t){var n=this;this.selectedStrategy=v()(this.strategies,["key",e]),"changePwd"!==this.screen&&(this.screen="login",this.selectedStrategy.strategy.useForm?this.$nextTick((function(){n.$refs.iptEmail.focus()})):(this.isLoading=!0,window.location.assign("/login/"+e)))}},mounted:function(){this.isShown=!0,this.changePwdContinuationToken&&(this.screen="changePwd",this.continuationToken=this.changePwdContinuationToken)},methods:{login:function(){var e=this;return x(b().mark((function t(){var n,i;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.errorShown=!1,!(e.username.length<2)){t.next=7;break}e.errorMessage=e.$t("auth:invalidEmailUsername"),e.errorShown=!0,e.$refs.iptEmail.focus(),t.next=37;break;case 7:if(!(e.password.length<2)){t.next=13;break}e.errorMessage=e.$t("auth:invalidPassword"),e.errorShown=!0,e.$refs.iptPassword.focus(),t.next=37;break;case 13:return e.loaderColor="grey darken-4",e.loaderTitle=e.$t("auth:signingIn"),e.isLoading=!0,t.prev=16,t.next=19,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strategy"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authentication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}},{kind:"Argument",name:{kind:"Name",value:"strategy"},value:{kind:"Variable",name:{kind:"Name",value:"strategy"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"jwt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mustChangePwd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mustProvideTFA"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mustSetupTFA"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"continuationToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redirect"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tfaQRImage"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:678,source:{body:"\n              mutation($username: String!, $password: String!, $strategy: String!) {\n                authentication {\n                  login(username: $username, password: $password, strategy: $strategy) {\n                    responseResult {\n                      succeeded\n                      errorCode\n                      slug\n                      message\n                    }\n                    jwt\n                    mustChangePwd\n                    mustProvideTFA\n                    mustSetupTFA\n                    continuationToken\n                    redirect\n                    tfaQRImage\n                  }\n                }\n              }\n            ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{username:e.username,password:e.password,strategy:e.selectedStrategy.key}});case 19:if(n=t.sent,!u()(n,"data.authentication.login")){t.next=29;break}if(!0!==(i=d()(n,"data.authentication.login",{})).responseResult.succeeded){t.next=26;break}e.handleLoginResponse(i),t.next=27;break;case 26:throw new Error(i.responseResult.message);case 27:t.next=30;break;case 29:throw new Error(e.$t("auth:genericError"));case 30:t.next=37;break;case 32:t.prev=32,t.t0=t.catch(16),console.error(t.t0),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"}),e.isLoading=!1;case 37:case"end":return t.stop()}}),t,null,[[16,32]])})))()},verifySecurityCode:function(e){var t=this;return x(b().mark((function n(){var i,a;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e&&(e=!1),6===t.securityCode.length){n.next=6;break}t.$store.commit("showNotification",{style:"red",message:"Enter a valid security code.",icon:"alert"}),e?t.$refs.iptTFASetup.focus():t.$refs.iptTFA.focus(),n.next=31;break;case 6:return t.loaderColor="grey darken-4",t.loaderTitle=t.$t("auth:signingIn"),t.isLoading=!0,n.prev=9,n.next=12,t.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"continuationToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"securityCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"setup"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authentication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loginTFA"},arguments:[{kind:"Argument",name:{kind:"Name",value:"continuationToken"},value:{kind:"Variable",name:{kind:"Name",value:"continuationToken"}}},{kind:"Argument",name:{kind:"Name",value:"securityCode"},value:{kind:"Variable",name:{kind:"Name",value:"securityCode"}}},{kind:"Argument",name:{kind:"Name",value:"setup"},value:{kind:"Variable",name:{kind:"Name",value:"setup"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"jwt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mustChangePwd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"continuationToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redirect"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:756,source:{body:"\n              mutation(\n                $continuationToken: String!\n                $securityCode: String!\n                $setup: Boolean\n                ) {\n                authentication {\n                  loginTFA(\n                    continuationToken: $continuationToken\n                    securityCode: $securityCode\n                    setup: $setup\n                    ) {\n                    responseResult {\n                      succeeded\n                      errorCode\n                      slug\n                      message\n                    }\n                    jwt\n                    mustChangePwd\n                    continuationToken\n                    redirect\n                  }\n                }\n              }\n            ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{continuationToken:t.continuationToken,securityCode:t.securityCode,setup:e}});case 12:if(i=n.sent,!u()(i,"data.authentication.loginTFA")){n.next=23;break}if(!0!==(a=d()(i,"data.authentication.loginTFA",{})).responseResult.succeeded){n.next=19;break}t.handleLoginResponse(a),n.next=21;break;case 19:throw e||(t.isTFAShown=!1),new Error(a.responseResult.message);case 21:n.next=24;break;case 23:throw new Error(t.$t("auth:genericError"));case 24:n.next=31;break;case 26:n.prev=26,n.t0=n.catch(9),console.error(n.t0),t.$store.commit("showNotification",{style:"red",message:n.t0.message,icon:"alert"}),t.isLoading=!1;case 31:case"end":return n.stop()}}),n,null,[[9,26]])})))()},changePassword:function(){var e=this;return x(b().mark((function t(){var n,i;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loaderColor="grey darken-4",e.loaderTitle=e.$t("auth:changePwd.loading"),e.isLoading=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"continuationToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newPassword"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authentication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"loginChangePassword"},arguments:[{kind:"Argument",name:{kind:"Name",value:"continuationToken"},value:{kind:"Variable",name:{kind:"Name",value:"continuationToken"}}},{kind:"Argument",name:{kind:"Name",value:"newPassword"},value:{kind:"Variable",name:{kind:"Name",value:"newPassword"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"jwt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"continuationToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"redirect"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:618,source:{body:"\n            mutation (\n              $continuationToken: String!\n              $newPassword: String!\n            ) {\n              authentication {\n                loginChangePassword (\n                  continuationToken: $continuationToken\n                  newPassword: $newPassword\n                ) {\n                  responseResult {\n                    succeeded\n                    errorCode\n                    slug\n                    message\n                  }\n                  jwt\n                  continuationToken\n                  redirect\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{continuationToken:e.continuationToken,newPassword:e.newPassword}});case 6:if(n=t.sent,!u()(n,"data.authentication.loginChangePassword")){t.next=16;break}if(!0!==(i=d()(n,"data.authentication.loginChangePassword",{})).responseResult.succeeded){t.next=13;break}e.handleLoginResponse(i),t.next=14;break;case 13:throw new Error(i.responseResult.message);case 14:t.next=17;break;case 16:throw new Error(e.$t("auth:genericError"));case 17:t.next=24;break;case 19:t.prev=19,t.t0=t.catch(3),console.error(t.t0),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"}),e.isLoading=!1;case 24:case"end":return t.stop()}}),t,null,[[3,19]])})))()},forgotPassword:function(){var e=this;this.screen="forgot",this.$nextTick((function(){e.$refs.iptForgotPwdEmail.focus()}))},forgotPasswordSubmit:function(){var e=this;return x(b().mark((function t(){var n,i;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loaderColor="grey darken-4",e.loaderTitle=e.$t("auth:forgotPasswordLoading"),e.isLoading=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authentication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forgotPassword"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseResult"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"succeeded"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:412,source:{body:"\n            mutation (\n              $email: String!\n            ) {\n              authentication {\n                forgotPassword (\n                  email: $email\n                ) {\n                  responseResult {\n                    succeeded\n                    errorCode\n                    slug\n                    message\n                  }\n                }\n              }\n            }\n          ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{email:e.username}});case 6:if(n=t.sent,!u()(n,"data.authentication.forgotPassword.responseResult")){t.next=17;break}if(!0!==(i=d()(n,"data.authentication.forgotPassword.responseResult",{})).succeeded){t.next=14;break}e.$store.commit("showNotification",{style:"success",message:e.$t("auth:forgotPasswordSuccess"),icon:"email"}),e.screen="login",t.next=15;break;case 14:throw new Error(i.message);case 15:t.next=18;break;case 17:throw new Error(e.$t("auth:genericError"));case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(3),console.error(t.t0),e.$store.commit("showNotification",{style:"red",message:t.t0.message,icon:"alert"});case 24:e.isLoading=!1;case 25:case"end":return t.stop()}}),t,null,[[3,20]])})))()},handleLoginResponse:function(e){var t=this;this.continuationToken=e.continuationToken,!0===e.mustChangePwd?(this.screen="changePwd",this.$nextTick((function(){t.$refs.iptNewPassword.focus()})),this.isLoading=!1):!0===e.mustProvideTFA?(this.securityCode="",this.isTFAShown=!0,setTimeout((function(){t.$refs.iptTFA.focus()}),500),this.isLoading=!1):!0===e.mustSetupTFA?(this.securityCode="",this.isTFASetupShown=!0,this.tfaQRImage=e.tfaQRImage,setTimeout((function(){t.$refs.iptTFASetup.focus()}),500),this.isLoading=!1):(this.loaderColor="green darken-1",this.loaderTitle=this.$t("auth:loginSuccess"),y.a.set("jwt",e.jwt,{expires:365}),r()((function(){var t=y.a.get("loginRedirect");"/"===t&&e.redirect?(y.a.remove("loginRedirect"),window.location.replace(e.redirect)):t?(y.a.remove("loginRedirect"),window.location.replace(t)):e.redirect?window.location.replace(e.redirect):window.location.replace("/")}),1e3))}},apollo:{strategies:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authentication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeStrategies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"enabledOnly"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"strategy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"useForm"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"usernameType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"selfRegistration"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:403,source:{body:"\n        {\n          authentication {\n            activeStrategies(enabledOnly: true) {\n              key\n              strategy {\n                key\n                logo\n                color\n                icon\n                useForm\n                usernameType\n              }\n              displayName\n              order\n              selfRegistration\n            }\n          }\n        }\n      ",name:"GraphQL request",locationOffset:{line:1,column:1}}}},update:function(e){return o()(e.authentication.activeStrategies,["order"])},watchLoading:function(e){this.$store.commit("loading"+(e?"Start":"Stop"),"login-strategies-refresh")}}}},N=(n("./client/components/login.vue?vue&type=style&index=0&lang=scss&"),n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),C=n("./node_modules/vuetify-loader/lib/runtime/installComponents.js"),T=n.n(C),F=n("./node_modules/vuetify/lib/components/VAlert/VAlert.js"),P=n("./node_modules/vuetify/lib/components/VApp/VApp.js"),j=n("./node_modules/vuetify/lib/components/VAvatar/VAvatar.js"),$=n("./node_modules/vuetify/lib/components/VBtn/VBtn.js"),L=n("./node_modules/vuetify/lib/components/VCard/VCard.js"),V=n("./node_modules/vuetify/lib/components/VDialog/VDialog.js"),A=n("./node_modules/vuetify/lib/components/VDivider/VDivider.js"),E=n("./node_modules/vuetify/lib/components/VImg/VImg.js"),R=n("./node_modules/vuetify/lib/components/VList/VList.js"),O=n("./node_modules/vuetify/lib/components/VList/VListItem.js"),D=n("./node_modules/vuetify/lib/components/VList/VListItemGroup.js"),I=n("./node_modules/vuetify/lib/components/VTextField/VTextField.js"),G=Object(N.a)(_,i,[],!1,null,null,null);T()(G,{VAlert:F.a,VApp:P.a,VAvatar:j.a,VBtn:$.a,VCard:L.a,VDialog:V.a,VDivider:A.a,VImg:E.a,VList:R.a,VListItem:O.a,VListItemGroup:D.a,VTextField:I.a}),G.options.__file="client/components/login.vue";t.default=G.exports},"./client/components/login.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){"use strict";n("./node_modules/cache-loader/dist/cjs.js?!./node_modules/style-loader/dist/cjs.js!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/login.vue?vue&type=style&index=0&lang=scss&")},"./node_modules/cache-loader/dist/cjs.js?!./node_modules/style-loader/dist/cjs.js!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/login.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){var i=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=n("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/login.vue?vue&type=style&index=0&lang=scss&");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};i(a,o);e.exports=a.locals||{}},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js?!./node_modules/sass-resources-loader/lib/loader.js?!./node_modules/vue-loader/lib/index.js?!./client/components/login.vue?vue&type=style&index=0&lang=scss&":function(e,t,n){}}]);