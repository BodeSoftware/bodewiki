{"remainingRequest":"/Users/shanebeal/Desktop/bodewiki/node_modules/babel-loader/lib/index.js??ref--0-1!/Users/shanebeal/Desktop/bodewiki/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shanebeal/Desktop/bodewiki/client/components/editor/editor-modal-media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shanebeal/Desktop/bodewiki/client/components/editor/editor-modal-media.vue","mtime":1742769082000},{"path":"/Users/shanebeal/Desktop/bodewiki/.babelrc","mtime":1742797763162},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/cache-loader/dist/cjs.js","mtime":1742797622487},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/babel-loader/lib/index.js","mtime":1742797622325},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/vue-loader/lib/index.js","mtime":1742797627417}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9nZXQgZnJvbSAibG9kYXNoL2dldCI7CmltcG9ydCBfbGFzdCBmcm9tICJsb2Rhc2gvbGFzdCI7CmltcG9ydCBfZGVsYXkgZnJvbSAibG9kYXNoL2RlbGF5IjsKaW1wb3J0IF9maW5kIGZyb20gImxvZGFzaC9maW5kIjsKaW1wb3J0IF9jb21wYWN0IGZyb20gImxvZGFzaC9jb21wYWN0IjsKCmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0OyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgb1tTeW1ib2wuaXRlcmF0b3JdID09IG51bGwpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsgcmV0dXJuIGl0Lm5leHQuYmluZChpdCk7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgppbXBvcnQgeyBnZXQsIHN5bmMgfSBmcm9tICd2dWV4LXBhdGhpZnknOwppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnOwppbXBvcnQgdnVlRmlsZVBvbmQgZnJvbSAndnVlLWZpbGVwb25kJzsKaW1wb3J0ICdmaWxlcG9uZC9kaXN0L2ZpbGVwb25kLm1pbi5jc3MnOwppbXBvcnQgbGlzdEFzc2V0UXVlcnkgZnJvbSAnZ3FsL2VkaXRvci9lZGl0b3ItbWVkaWEtcXVlcnktbGlzdC5ncWwnOwppbXBvcnQgbGlzdEZvbGRlckFzc2V0UXVlcnkgZnJvbSAnZ3FsL2VkaXRvci9lZGl0b3ItbWVkaWEtcXVlcnktZm9sZGVyLWxpc3QuZ3FsJzsKaW1wb3J0IGNyZWF0ZUFzc2V0Rm9sZGVyTXV0YXRpb24gZnJvbSAnZ3FsL2VkaXRvci9lZGl0b3ItbWVkaWEtbXV0YXRpb24tZm9sZGVyLWNyZWF0ZS5ncWwnOwppbXBvcnQgcmVuYW1lQXNzZXRNdXRhdGlvbiBmcm9tICdncWwvZWRpdG9yL2VkaXRvci1tZWRpYS1tdXRhdGlvbi1hc3NldC1yZW5hbWUuZ3FsJzsKaW1wb3J0IGRlbGV0ZUFzc2V0TXV0YXRpb24gZnJvbSAnZ3FsL2VkaXRvci9lZGl0b3ItbWVkaWEtbXV0YXRpb24tYXNzZXQtZGVsZXRlLmdxbCc7CnZhciBGaWxlUG9uZCA9IHZ1ZUZpbGVQb25kKCk7CnZhciBsb2NhbGVTZWdtZW50UmVnZXggPSAvXltBLVpdezJ9KC1bQS1aXXsyfSk/JC9pOwp2YXIgZGlzYWxsb3dlZEZvbGRlckNoYXJzID0gL1tBLVooKT0uIUAjJCU/JiorYH48Piw7OlxcL1tcXcKse3wgXS87CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBGaWxlUG9uZDogRmlsZVBvbmQKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvbGRlcnM6IFtdLAogICAgICBmaWxlczogW10sCiAgICAgIGFzc2V0czogW10sCiAgICAgIHBhZ2luYXRpb246IDEsCiAgICAgIHJlbW90ZUltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VBbGlnbm1lbnRzOiBbewogICAgICAgIHRleHQ6ICdOb25lJywKICAgICAgICB2YWx1ZTogJycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdMZWZ0JywKICAgICAgICB2YWx1ZTogJ2xlZnQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnQ2VudGVyZWQnLAogICAgICAgIHZhbHVlOiAnY2VudGVyJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1JpZ2h0JywKICAgICAgICB2YWx1ZTogJ3JpZ2h0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ0Fic29sdXRlIFRvcCBSaWdodCcsCiAgICAgICAgdmFsdWU6ICdhYnN0b3ByaWdodCcKICAgICAgfV0sCiAgICAgIGltYWdlQWxpZ25tZW50OiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG5ld0ZvbGRlckRpYWxvZzogZmFsc2UsCiAgICAgIG5ld0ZvbGRlck5hbWU6ICcnLAogICAgICBuZXdGb2xkZXJMb2FkaW5nOiBmYWxzZSwKICAgICAgcHJldmlld0RpYWxvZzogZmFsc2UsCiAgICAgIHJlbmFtZURpYWxvZzogZmFsc2UsCiAgICAgIHJlbmFtZUFzc2V0TmFtZTogJycsCiAgICAgIHJlbmFtZUFzc2V0TG9hZGluZzogZmFsc2UsCiAgICAgIGRlbGV0ZURpYWxvZzogZmFsc2UsCiAgICAgIGRlbGV0ZUFzc2V0TG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNTaG93bjogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWwpOwogICAgICB9CiAgICB9LAogICAgZWRpdG9yS2V5OiBnZXQoJ2VkaXRvci9lZGl0b3JLZXknKSwKICAgIGFjdGl2ZU1vZGFsOiBzeW5jKCdlZGl0b3IvYWN0aXZlTW9kYWwnKSwKICAgIGZvbGRlclRyZWU6IGdldCgnZWRpdG9yL21lZGlhQGZvbGRlclRyZWUnKSwKICAgIGN1cnJlbnRGb2xkZXJJZDogc3luYygnZWRpdG9yL21lZGlhQGN1cnJlbnRGb2xkZXJJZCcpLAogICAgY3VycmVudEZpbGVJZDogc3luYygnZWRpdG9yL21lZGlhQGN1cnJlbnRGaWxlSWQnKSwKICAgIHBhZ2VUb3RhbDogZnVuY3Rpb24gcGFnZVRvdGFsKCkgewogICAgICBpZiAoIXRoaXMuYXNzZXRzKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5hc3NldHMubGVuZ3RoIC8gMTUpOwogICAgfSwKICAgIGhlYWRlcnM6IGZ1bmN0aW9uIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiBfY29tcGFjdChbdGhpcy4kdnVldGlmeS5icmVha3BvaW50LnNtQW5kVXAgJiYgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VkaXRvcjphc3NldHMuaGVhZGVySWQnKSwKICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICB3aWR0aDogODAKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VkaXRvcjphc3NldHMuaGVhZGVyRmlsZW5hbWUnKSwKICAgICAgICB2YWx1ZTogJ2ZpbGVuYW1lJwogICAgICB9LCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubGdBbmRVcCAmJiB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJUeXBlJyksCiAgICAgICAgdmFsdWU6ICdleHQnLAogICAgICAgIHdpZHRoOiA5MAogICAgICB9LCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubWRBbmRVcCAmJiB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJGaWxlU2l6ZScpLAogICAgICAgIHZhbHVlOiAnZmlsZVNpemUnLAogICAgICAgIHdpZHRoOiAxMTAKICAgICAgfSwgdGhpcy4kdnVldGlmeS5icmVha3BvaW50Lm1kQW5kVXAgJiYgewogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VkaXRvcjphc3NldHMuaGVhZGVyQWRkZWQnKSwKICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRBdCcsCiAgICAgICAgd2lkdGg6IDE3NQogICAgICB9LCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQuc21BbmRVcCAmJiB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJBY3Rpb25zJyksCiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIHdpZHRoOiA4MCwKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgYWxpZ246ICdyaWdodCcKICAgICAgfV0pOwogICAgfSwKICAgIGlzRm9sZGVyTmFtZVZhbGlkOiBmdW5jdGlvbiBpc0ZvbGRlck5hbWVWYWxpZCgpIHsKICAgICAgcmV0dXJuIHRoaXMubmV3Rm9sZGVyTmFtZS5sZW5ndGggPiAxICYmICFsb2NhbGVTZWdtZW50UmVnZXgudGVzdCh0aGlzLm5ld0ZvbGRlck5hbWUpICYmICFkaXNhbGxvd2VkRm9sZGVyQ2hhcnMudGVzdCh0aGlzLm5ld0ZvbGRlck5hbWUpOwogICAgfSwKICAgIGN1cnJlbnRBc3NldDogZnVuY3Rpb24gY3VycmVudEFzc2V0KCkgewogICAgICByZXR1cm4gX2ZpbmQodGhpcy5hc3NldHMsIFsnaWQnLCB0aGlzLmN1cnJlbnRGaWxlSWRdKSB8fCB7fTsKICAgIH0sCiAgICBmaWxlUG9uZFNlcnZlck9wdHM6IGZ1bmN0aW9uIGZpbGVQb25kU2VydmVyT3B0cygpIHsKICAgICAgdmFyIGp3dFRva2VuID0gQ29va2llcy5nZXQoJ2p3dCcpOwogICAgICByZXR1cm4gewogICAgICAgIHByb2Nlc3M6IHsKICAgICAgICAgIHVybDogJy91JywKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAiQmVhcmVyICIgKyBqd3RUb2tlbgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBuZXdGb2xkZXJEaWFsb2c6IGZ1bmN0aW9uIG5ld0ZvbGRlckRpYWxvZyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRyZWZzLmZvbGRlck5hbWVJcHQuZm9jdXMoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgcHJldHR5Qnl0ZXM6IGZ1bmN0aW9uIHByZXR0eUJ5dGVzKG51bSkgewogICAgICBpZiAodHlwZW9mIG51bSAhPT0gJ251bWJlcicgfHwgaXNOYU4obnVtKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgbnVtYmVyJyk7CiAgICAgIH0KCiAgICAgIHZhciBleHBvbmVudDsKICAgICAgdmFyIHVuaXQ7CiAgICAgIHZhciBuZWcgPSBudW0gPCAwOwogICAgICB2YXIgdW5pdHMgPSBbJ0InLCAna0InLCAnTUInLCAnR0InLCAnVEInLCAnUEInLCAnRUInLCAnWkInLCAnWUInXTsKCiAgICAgIGlmIChuZWcpIHsKICAgICAgICBudW0gPSAtbnVtOwogICAgICB9CgogICAgICBpZiAobnVtIDwgMSkgewogICAgICAgIHJldHVybiAobmVnID8gJy0nIDogJycpICsgbnVtICsgJyBCJzsKICAgICAgfQoKICAgICAgZXhwb25lbnQgPSBNYXRoLm1pbihNYXRoLmZsb29yKE1hdGgubG9nKG51bSkgLyBNYXRoLmxvZygxMDAwKSksIHVuaXRzLmxlbmd0aCAtIDEpOwogICAgICBudW0gPSAobnVtIC8gTWF0aC5wb3coMTAwMCwgZXhwb25lbnQpKS50b0ZpeGVkKDIpICogMTsKICAgICAgdW5pdCA9IHVuaXRzW2V4cG9uZW50XTsKICAgICAgcmV0dXJuIChuZWcgPyAnLScgOiAnJykgKyBudW0gKyAnICcgKyB1bml0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kYXBvbGxvLnF1ZXJpZXMuYXNzZXRzLnJlZmV0Y2goKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzMi4kdCgnZWRpdG9yOmFzc2V0cy5yZWZyZXNoU3VjY2VzcycpLAogICAgICAgICAgICAgICAgICBzdHlsZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBpY29uOiAnY2hlY2snCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkgewogICAgICB2YXIgYXNzZXQgPSBfZmluZCh0aGlzLmFzc2V0cywgWydpZCcsIHRoaXMuY3VycmVudEZpbGVJZF0pOwoKICAgICAgdmFyIGFzc2V0UGF0aCA9IHRoaXMuZm9sZGVyVHJlZS5tYXAoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5zbHVnOwogICAgICB9KS5qb2luKCcvJyk7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoJ2VkaXRvckluc2VydCcsIHsKICAgICAgICBraW5kOiBhc3NldC5raW5kLAogICAgICAgIHBhdGg6IHRoaXMuY3VycmVudEZvbGRlcklkID4gMCA/ICIvIiArIGFzc2V0UGF0aCArICIvIiArIGFzc2V0LmZpbGVuYW1lIDogIi8iICsgYXNzZXQuZmlsZW5hbWUsCiAgICAgICAgdGV4dDogYXNzZXQuZmlsZW5hbWUsCiAgICAgICAgYWxpZ246IHRoaXMuaW1hZ2VBbGlnbm1lbnQKICAgICAgfSk7CiAgICAgIHRoaXMuYWN0aXZlTW9kYWwgPSAnJzsKICAgIH0sCiAgICBicm93c2U6IGZ1bmN0aW9uIGJyb3dzZSgpIHsKICAgICAgdGhpcy4kcmVmcy5wb25kLmJyb3dzZSgpOwogICAgfSwKICAgIHVwbG9hZDogZnVuY3Rpb24gdXBsb2FkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBmaWxlcywgX2l0ZXJhdG9yLCBfc3RlcCwgZmlsZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGZpbGVzID0gX3RoaXMzLiRyZWZzLnBvbmQuZ2V0RmlsZXMoKTsKCiAgICAgICAgICAgICAgICBpZiAoIShmaWxlcy5sZW5ndGggPCAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfdGhpczMuJHN0b3JlLmNvbW1pdCgnc2hvd05vdGlmaWNhdGlvbicsIHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXMzLiR0KCdlZGl0b3I6YXNzZXRzLm5vVXBsb2FkRXJyb3InKSwKICAgICAgICAgICAgICAgICAgc3R5bGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShmaWxlcyk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgZmlsZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICBmaWxlLnNldE1ldGFkYXRhKHsKICAgICAgICAgICAgICAgICAgICBmb2xkZXJJZDogX3RoaXMzLmN1cnJlbnRGb2xkZXJJZAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRyZWZzLnBvbmQucHJvY2Vzc0ZpbGVzKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uRmlsZVByb2Nlc3NlZDogZnVuY3Rpb24gb25GaWxlUHJvY2Vzc2VkKGVyciwgZmlsZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfdGhpczQuJHN0b3JlLmNvbW1pdCgnc2hvd05vdGlmaWNhdGlvbicsIHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXM0LiR0KCdlZGl0b3I6YXNzZXRzLnVwbG9hZEZhaWxlZCcpLAogICAgICAgICAgICAgICAgICBzdHlsZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfZGVsYXkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczQuJHJlZnMucG9uZC5yZW1vdmVGaWxlKGZpbGUuaWQpOwogICAgICAgICAgICAgICAgfSwgNTAwMCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kYXBvbGxvLnF1ZXJpZXMuYXNzZXRzLnJlZmV0Y2goKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZG93bkZvbGRlcjogZnVuY3Rpb24gZG93bkZvbGRlcihmb2xkZXIpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0b3IvcHVzaE1lZGlhRm9sZGVyVHJlZScsIGZvbGRlcik7CiAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gZm9sZGVyLmlkOwogICAgICB0aGlzLmN1cnJlbnRGaWxlSWQgPSBudWxsOwogICAgfSwKICAgIHVwRm9sZGVyOiBmdW5jdGlvbiB1cEZvbGRlcigpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0b3IvcG9wTWVkaWFGb2xkZXJUcmVlJyk7CgogICAgICB2YXIgcGFyZW50Rm9sZGVyID0gX2xhc3QodGhpcy5mb2xkZXJUcmVlKTsKCiAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gcGFyZW50Rm9sZGVyID8gcGFyZW50Rm9sZGVyLmlkIDogMDsKICAgICAgdGhpcy5jdXJyZW50RmlsZUlkID0gbnVsbDsKICAgIH0sCiAgICBjcmVhdGVGb2xkZXI6IGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM1LiRzdG9yZS5jb21taXQoImxvYWRpbmdTdGFydCIsICdlZGl0b3ItbWVkaWEtY3JlYXRlZm9sZGVyJyk7CgogICAgICAgICAgICAgICAgX3RoaXM1Lm5ld0ZvbGRlckxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiBjcmVhdGVBc3NldEZvbGRlck11dGF0aW9uLAogICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICAgICAgICBwYXJlbnRGb2xkZXJJZDogX3RoaXM1LmN1cnJlbnRGb2xkZXJJZCwKICAgICAgICAgICAgICAgICAgICBzbHVnOiBfdGhpczUubmV3Rm9sZGVyTmFtZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghX2dldChyZXNwLCAnZGF0YS5hc3NldHMuY3JlYXRlRm9sZGVyLnJlc3BvbnNlUmVzdWx0LnN1Y2NlZWRlZCcsIGZhbHNlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LiRhcG9sbG8ucXVlcmllcy5mb2xkZXJzLnJlZmV0Y2goKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXM1LiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzNS4kdCgnZWRpdG9yOmFzc2V0cy5mb2xkZXJDcmVhdGVTdWNjZXNzJyksCiAgICAgICAgICAgICAgICAgIHN0eWxlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIGljb246ICdjaGVjaycKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzNS5uZXdGb2xkZXJEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzNS5uZXdGb2xkZXJOYW1lID0gJyc7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfdGhpczUuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBuZXcgRXJyb3IoX2dldChyZXNwLCAnZGF0YS5hc3NldHMuY3JlYXRlRm9sZGVyLnJlc3BvbnNlUmVzdWx0Lm1lc3NhZ2UnKSkpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBfY29udGV4dDQudDApOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgX3RoaXM1Lm5ld0ZvbGRlckxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczUuJHN0b3JlLmNvbW1pdCgibG9hZGluZ1N0b3AiLCAnZWRpdG9yLW1lZGlhLWNyZWF0ZWZvbGRlcicpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzIsIDE3XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvcGVuUmVuYW1lRGlhbG9nOiBmdW5jdGlvbiBvcGVuUmVuYW1lRGlhbG9nKCkgewogICAgICB0aGlzLnJlbmFtZUFzc2V0TmFtZSA9IHRoaXMuY3VycmVudEFzc2V0LmZpbGVuYW1lOwogICAgICB0aGlzLnJlbmFtZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgcmVuYW1lQXNzZXQ6IGZ1bmN0aW9uIHJlbmFtZUFzc2V0KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczYuJHN0b3JlLmNvbW1pdCgibG9hZGluZ1N0YXJ0IiwgJ2VkaXRvci1tZWRpYS1yZW5hbWVhc3NldCcpOwoKICAgICAgICAgICAgICAgIF90aGlzNi5yZW5hbWVBc3NldExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiByZW5hbWVBc3NldE11dGF0aW9uLAogICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXM2LmN1cnJlbnRGaWxlSWQsCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IF90aGlzNi5yZW5hbWVBc3NldE5hbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIV9nZXQocmVzcCwgJ2RhdGEuYXNzZXRzLnJlbmFtZUFzc2V0LnJlc3BvbnNlUmVzdWx0LnN1Y2NlZWRlZCcsIGZhbHNlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRhcG9sbG8ucXVlcmllcy5hc3NldHMucmVmZXRjaCgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczYuJHN0b3JlLmNvbW1pdCgnc2hvd05vdGlmaWNhdGlvbicsIHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogX3RoaXM2LiR0KCdlZGl0b3I6YXNzZXRzLnJlbmFtZVN1Y2Nlc3MnKSwKICAgICAgICAgICAgICAgICAgc3R5bGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgaWNvbjogJ2NoZWNrJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM2LnJlbmFtZURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM2LnJlbmFtZUFzc2V0TmFtZSA9ICcnOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX3RoaXM2LiRzdG9yZS5jb21taXQoJ3B1c2hHcmFwaEVycm9yJywgbmV3IEVycm9yKF9nZXQocmVzcCwgJ2RhdGEuYXNzZXRzLnJlbmFtZUFzc2V0LnJlc3BvbnNlUmVzdWx0Lm1lc3NhZ2UnKSkpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgICAgICBfdGhpczYuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBfY29udGV4dDUudDApOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgX3RoaXM2LnJlbmFtZUFzc2V0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzNi4kc3RvcmUuY29tbWl0KCJsb2FkaW5nU3RvcCIsICdlZGl0b3ItbWVkaWEtcmVuYW1lYXNzZXQnKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1syLCAxN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlQXNzZXQ6IGZ1bmN0aW9uIGRlbGV0ZUFzc2V0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciByZXNwOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczcuJHN0b3JlLmNvbW1pdCgibG9hZGluZ1N0YXJ0IiwgJ2VkaXRvci1tZWRpYS1kZWxldGVhc3NldCcpOwoKICAgICAgICAgICAgICAgIF90aGlzNy5kZWxldGVBc3NldExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiBkZWxldGVBc3NldE11dGF0aW9uLAogICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXM3LmN1cnJlbnRGaWxlSWQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIV9nZXQocmVzcCwgJ2RhdGEuYXNzZXRzLmRlbGV0ZUFzc2V0LnJlc3BvbnNlUmVzdWx0LnN1Y2NlZWRlZCcsIGZhbHNlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczcuY3VycmVudEZpbGVJZCA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy4kYXBvbGxvLnF1ZXJpZXMuYXNzZXRzLnJlZmV0Y2goKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF90aGlzNy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfdGhpczcuJHQoJ2VkaXRvcjphc3NldHMuZGVsZXRlU3VjY2VzcycpLAogICAgICAgICAgICAgICAgICBzdHlsZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBpY29uOiAnY2hlY2snCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczcuZGVsZXRlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfdGhpczcuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBuZXcgRXJyb3IoX2dldChyZXNwLCAnZGF0YS5hc3NldHMuZGVsZXRlQXNzZXQucmVzcG9uc2VSZXN1bHQubWVzc2FnZScpKSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDE3OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gX2NvbnRleHQ2WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICAgIF90aGlzNy4kc3RvcmUuY29tbWl0KCdwdXNoR3JhcGhFcnJvcicsIF9jb250ZXh0Ni50MCk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBfdGhpczcuZGVsZXRlQXNzZXRMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXM3LiRzdG9yZS5jb21taXQoImxvYWRpbmdTdG9wIiwgJ2VkaXRvci1tZWRpYS1kZWxldGVhc3NldCcpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzIsIDE3XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9ICcnOwogICAgfQogIH0sCiAgYXBvbGxvOiB7CiAgICBmb2xkZXJzOiB7CiAgICAgIHF1ZXJ5OiBsaXN0Rm9sZGVyQXNzZXRRdWVyeSwKICAgICAgdmFyaWFibGVzOiBmdW5jdGlvbiB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHBhcmVudEZvbGRlcklkOiB0aGlzLmN1cnJlbnRGb2xkZXJJZAogICAgICAgIH07CiAgICAgIH0sCiAgICAgIGZldGNoUG9saWN5OiAnbmV0d29yay1vbmx5JywKICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkgewogICAgICAgIHJldHVybiBkYXRhLmFzc2V0cy5mb2xkZXJzOwogICAgICB9LAogICAgICB3YXRjaExvYWRpbmc6IGZ1bmN0aW9uIHdhdGNoTG9hZGluZyhpc0xvYWRpbmcpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImxvYWRpbmciICsgKGlzTG9hZGluZyA/ICdTdGFydCcgOiAnU3RvcCcpLCAnZWRpdG9yLW1lZGlhLWZvbGRlcnMtbGlzdC1yZWZyZXNoJyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3NldHM6IHsKICAgICAgcXVlcnk6IGxpc3RBc3NldFF1ZXJ5LAogICAgICB2YXJpYWJsZXM6IGZ1bmN0aW9uIHZhcmlhYmxlcygpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZm9sZGVySWQ6IHRoaXMuY3VycmVudEZvbGRlcklkLAogICAgICAgICAga2luZDogJ0FMTCcKICAgICAgICB9OwogICAgICB9LAogICAgICB0aHJvdHRsZTogMTAwMCwKICAgICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknLAogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuYXNzZXRzLmxpc3Q7CiAgICAgIH0sCiAgICAgIHdhdGNoTG9hZGluZzogZnVuY3Rpb24gd2F0Y2hMb2FkaW5nKGlzTG9hZGluZykgewogICAgICAgIHRoaXMubG9hZGluZyA9IGlzTG9hZGluZzsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImxvYWRpbmciICsgKGlzTG9hZGluZyA/ICdTdGFydCcgOiAnU3RvcCcpLCAnZWRpdG9yLW1lZGlhLWxpc3QtcmVmcmVzaCcpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},null]}