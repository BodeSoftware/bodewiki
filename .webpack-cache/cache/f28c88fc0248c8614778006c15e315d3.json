{"remainingRequest":"/Users/shanebeal/Desktop/bodewiki/node_modules/babel-loader/lib/index.js??ref--0-1!/Users/shanebeal/Desktop/bodewiki/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shanebeal/Desktop/bodewiki/client/components/editor/editor-markdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shanebeal/Desktop/bodewiki/client/components/editor/editor-markdown.vue","mtime":1742769082000},{"path":"/Users/shanebeal/Desktop/bodewiki/.babelrc","mtime":1742797763162},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/cache-loader/dist/cjs.js","mtime":1742797622487},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/babel-loader/lib/index.js","mtime":1742797622325},{"path":"/Users/shanebeal/Desktop/bodewiki/node_modules/vue-loader/lib/index.js","mtime":1742797627417}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zZXQgZnJvbSAibG9kYXNoL3NldCI7CmltcG9ydCBfZmluZExhc3QgZnJvbSAibG9kYXNoL2ZpbmRMYXN0IjsKaW1wb3J0IF9sYXN0IGZyb20gImxvZGFzaC9sYXN0IjsKaW1wb3J0IF9mbGF0dGVuIGZyb20gImxvZGFzaC9mbGF0dGVuIjsKaW1wb3J0IF9nZXQgZnJvbSAibG9kYXNoL2dldCI7CmltcG9ydCBfdGltZXMgZnJvbSAibG9kYXNoL3RpbWVzIjsKaW1wb3J0IF9zdGFydHNXaXRoIGZyb20gImxvZGFzaC9zdGFydHNXaXRoIjsKaW1wb3J0IF9kZWJvdW5jZSBmcm9tICJsb2Rhc2gvZGVib3VuY2UiOwppbXBvcnQgX2VzY2FwZSBmcm9tICJsb2Rhc2gvZXNjYXBlIjsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgppbXBvcnQgeyBnZXQsIHN5bmMgfSBmcm9tICd2dWV4LXBhdGhpZnknOwppbXBvcnQgbWFya2Rvd25IZWxwIGZyb20gJy4vbWFya2Rvd24vaGVscC52dWUnOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7Ci8qIGdsb2JhbCBzaXRlQ29uZmlnLCBzaXRlTGFuZ3MgKi8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBJTVBPUlRTCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQ29kZSBNaXJyb3IKCmltcG9ydCBDb2RlTWlycm9yIGZyb20gJ2NvZGVtaXJyb3InOwppbXBvcnQgJ2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuY3NzJzsgLy8gTGFuZ3VhZ2UKCmltcG9ydCAnY29kZW1pcnJvci9tb2RlL21hcmtkb3duL21hcmtkb3duLmpzJzsgLy8gQWRkb25zCgppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VsZWN0aW9uL2FjdGl2ZS1saW5lLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9kaXNwbGF5L2Z1bGxzY3JlZW4uY3NzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlbGVjdGlvbi9tYXJrLXNlbGVjdGlvbi5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoY3Vyc29yLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2hpbnQvc2hvdy1oaW50LmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvZm9sZGNvZGUuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvZm9sZGd1dHRlci5jc3MnOyAvLyBNYXJrZG93bi1pdAoKaW1wb3J0IE1hcmtkb3duSXQgZnJvbSAnbWFya2Rvd24taXQnOwppbXBvcnQgbWRBdHRycyBmcm9tICdtYXJrZG93bi1pdC1hdHRycyc7CmltcG9ydCBtZERlY29yYXRlIGZyb20gJ21hcmtkb3duLWl0LWRlY29yYXRlJzsKaW1wb3J0IHsgZnVsbCBhcyBtZEVtb2ppIH0gZnJvbSAnbWFya2Rvd24taXQtZW1vamknOwppbXBvcnQgbWRUYXNrTGlzdHMgZnJvbSAnbWFya2Rvd24taXQtdGFzay1saXN0cyc7CmltcG9ydCBtZEV4cGFuZFRhYnMgZnJvbSAnbWFya2Rvd24taXQtZXhwYW5kLXRhYnMnOwppbXBvcnQgbWRBYmJyIGZyb20gJ21hcmtkb3duLWl0LWFiYnInOwppbXBvcnQgbWRTdXAgZnJvbSAnbWFya2Rvd24taXQtc3VwJzsKaW1wb3J0IG1kU3ViIGZyb20gJ21hcmtkb3duLWl0LXN1Yic7CmltcG9ydCBtZE1hcmsgZnJvbSAnbWFya2Rvd24taXQtbWFyayc7CmltcG9ydCBtZE11bHRpVGFibGUgZnJvbSAnbWFya2Rvd24taXQtbXVsdGltZC10YWJsZSc7CmltcG9ydCBtZEZvb3Rub3RlIGZyb20gJ21hcmtkb3duLWl0LWZvb3Rub3RlJzsKaW1wb3J0IG1kSW1zaXplIGZyb20gJ21hcmtkb3duLWl0LWltc2l6ZSc7CmltcG9ydCBrYXRleCBmcm9tICdrYXRleCc7CmltcG9ydCB1bmRlcmxpbmUgZnJvbSAnLi4vLi4vbGlicy9tYXJrZG93bi1pdC11bmRlcmxpbmUnOwppbXBvcnQgJ2thdGV4L2Rpc3QvY29udHJpYi9taGNoZW0nOwppbXBvcnQgdHdlbW9qaSBmcm9tICd0d2Vtb2ppJzsKaW1wb3J0IHBsYW50dW1sIGZyb20gJy4vbWFya2Rvd24vcGxhbnR1bWwnOyAvLyBQcmlzbSAoU3ludGF4IEhpZ2hsaWdodGluZykKCmltcG9ydCBQcmlzbSBmcm9tICdwcmlzbWpzJzsgLy8gTWVybWFpZAoKaW1wb3J0IG1lcm1haWQgZnJvbSAnbWVybWFpZCc7IC8vIEhlbHBlcnMKCmltcG9ydCBrYXRleEhlbHBlciBmcm9tICcuL2NvbW1vbi9rYXRleCc7CmltcG9ydCB0YWJzZXRIZWxwZXIgZnJvbSAnLi9tYXJrZG93bi90YWJzZXQnOwppbXBvcnQgY21Gb2xkIGZyb20gJy4vY29tbW9uL2NtRm9sZCc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gSU5JVAovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFBsYXRmb3JtIGRldGVjdGlvbgoKdmFyIEN0cmxLZXkgPSAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSkgPyAnQ21kJyA6ICdDdHJsJzsgLy8gUHJpc20gQ29uZmlnCgpQcmlzbS5wbHVnaW5zLmF1dG9sb2FkZXIubGFuZ3VhZ2VzX3BhdGggPSAnL19hc3NldHMvanMvcHJpc20vJzsKUHJpc20ucGx1Z2lucy5Ob3JtYWxpemVXaGl0ZXNwYWNlLnNldERlZmF1bHRzKHsKICAncmVtb3ZlLXRyYWlsaW5nJzogdHJ1ZSwKICAncmVtb3ZlLWluZGVudCc6IHRydWUsCiAgJ2xlZnQtdHJpbSc6IHRydWUsCiAgJ3JpZ2h0LXRyaW0nOiB0cnVlLAogICdyZW1vdmUtaW5pdGlhbC1saW5lLWZlZWQnOiB0cnVlLAogICd0YWJzLXRvLXNwYWNlcyc6IDIKfSk7IC8vIE1hcmtkb3duIEluc3RhbmNlCgp2YXIgbWQgPSBuZXcgTWFya2Rvd25JdCh7CiAgaHRtbDogdHJ1ZSwKICBicmVha3M6IHRydWUsCiAgbGlua2lmeTogdHJ1ZSwKICB0eXBvZ3JhcGh5OiB0cnVlLAogIGhpZ2hsaWdodDogZnVuY3Rpb24gaGlnaGxpZ2h0KHN0ciwgbGFuZykgewogICAgaWYgKGxhbmcgPT09ICdkaWFncmFtJykgewogICAgICByZXR1cm4gIjxwcmUgY2xhc3M9XCJkaWFncmFtXCI+IiArIEJ1ZmZlci5mcm9tKHN0ciwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCkgKyAiPC9wcmU+IjsKICAgIH0gZWxzZSBpZiAoWydtZXJtYWlkJywgJ3BsYW50dW1sJ10uaW5jbHVkZXMobGFuZykpIHsKICAgICAgcmV0dXJuICI8cHJlIGNsYXNzPVwiY29kZWJsb2NrLSIgKyBsYW5nICsgIlwiPjxjb2RlPiIgKyBfZXNjYXBlKHN0cikgKyAiPC9jb2RlPjwvcHJlPiI7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIjxwcmUgY2xhc3M9XCJsaW5lLW51bWJlcnNcIj48Y29kZSBjbGFzcz1cImxhbmd1YWdlLSIgKyBsYW5nICsgIlwiPiIgKyBfZXNjYXBlKHN0cikgKyAiPC9jb2RlPjwvcHJlPiI7CiAgICB9CiAgfQp9KS51c2UobWRBdHRycywgewogIGFsbG93ZWRBdHRyaWJ1dGVzOiBbJ2lkJywgJ2NsYXNzJywgJ3RhcmdldCddCn0pLnVzZShtZERlY29yYXRlKS51c2UodW5kZXJsaW5lKS51c2UobWRFbW9qaSkudXNlKG1kVGFza0xpc3RzLCB7CiAgbGFiZWw6IGZhbHNlLAogIGxhYmVsQWZ0ZXI6IGZhbHNlCn0pLnVzZShtZEV4cGFuZFRhYnMpLnVzZShtZEFiYnIpLnVzZShtZFN1cCkudXNlKG1kU3ViKS51c2UobWRNdWx0aVRhYmxlLCB7CiAgbXVsdGlsaW5lOiB0cnVlLAogIHJvd3NwYW46IHRydWUsCiAgaGVhZGVybGVzczogdHJ1ZQp9KS51c2UobWRNYXJrKS51c2UobWRGb290bm90ZSkudXNlKG1kSW1zaXplKTsgLy8gRE9NUHVyaWZ5IGZpeCBmb3IgZHJhdy5pbwoKRE9NUHVyaWZ5LmFkZEhvb2soJ3Vwb25TYW5pdGl6ZUVsZW1lbnQnLCBmdW5jdGlvbiAoZWxtKSB7CiAgaWYgKGVsbS5xdWVyeVNlbGVjdG9yQWxsKSB7CiAgICB2YXIgYnJlYWtzID0gZWxtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZvcmVpZ25PYmplY3QgYnIsIGZvcmVpZ25PYmplY3QgcCcpOwoKICAgIGlmIChicmVha3MgJiYgYnJlYWtzLmxlbmd0aCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJyZWFrcy5sZW5ndGg7IGkrKykgewogICAgICAgIGJyZWFrc1tpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgYnJlYWtzW2ldKTsKICAgICAgfQogICAgfQogIH0KfSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gSEVMUEVSIEZVTkNUSU9OUwovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEluamVjdCBsaW5lIG51bWJlcnMgZm9yIHByZXZpZXcgc2Nyb2xsIHN5bmMKCnZhciBsaW5lc01hcCA9IFtdOwoKZnVuY3Rpb24gaW5qZWN0TGluZU51bWJlcnModG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgc2xmKSB7CiAgdmFyIGxpbmU7CgogIGlmICh0b2tlbnNbaWR4XS5tYXAgJiYgdG9rZW5zW2lkeF0ubGV2ZWwgPT09IDApIHsKICAgIGxpbmUgPSB0b2tlbnNbaWR4XS5tYXBbMF07CiAgICB0b2tlbnNbaWR4XS5hdHRySm9pbignY2xhc3MnLCAnbGluZScpOwogICAgdG9rZW5zW2lkeF0uYXR0clNldCgnZGF0YS1saW5lJywgU3RyaW5nKGxpbmUpKTsKICAgIGxpbmVzTWFwLnB1c2gobGluZSk7CiAgfQoKICByZXR1cm4gc2xmLnJlbmRlclRva2VuKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIHNsZik7Cn0KCm1kLnJlbmRlcmVyLnJ1bGVzLnBhcmFncmFwaF9vcGVuID0gaW5qZWN0TGluZU51bWJlcnM7Cm1kLnJlbmRlcmVyLnJ1bGVzLmhlYWRpbmdfb3BlbiA9IGluamVjdExpbmVOdW1iZXJzOwptZC5yZW5kZXJlci5ydWxlcy5ibG9ja3F1b3RlX29wZW4gPSBpbmplY3RMaW5lTnVtYmVyczsKY21Gb2xkLnJlZ2lzdGVyKCdtYXJrZG93bicpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFBMQU5UVU1MCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gVE9ETzogVXNlIHNhbWUgb3B0aW9ucyBhcyBkZWZpbmVkIGluIGJhY2tlbmQKCnBsYW50dW1sLmluaXQobWQsIHt9KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBLQVRFWAovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Cgp2YXIgbWFjcm9zID0ge307Cm1kLmlubGluZS5ydWxlci5hZnRlcignZXNjYXBlJywgJ2thdGV4X2lubGluZScsIGthdGV4SGVscGVyLmthdGV4SW5saW5lKTsKCm1kLnJlbmRlcmVyLnJ1bGVzLmthdGV4X2lubGluZSA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCkgewogIHRyeSB7CiAgICByZXR1cm4ga2F0ZXgucmVuZGVyVG9TdHJpbmcodG9rZW5zW2lkeF0uY29udGVudCwgewogICAgICBkaXNwbGF5TW9kZTogZmFsc2UsCiAgICAgIG1hY3JvczogbWFjcm9zCiAgICB9KTsKICB9IGNhdGNoIChlcnIpIHsKICAgIGNvbnNvbGUud2FybihlcnIpOwogICAgcmV0dXJuIHRva2Vuc1tpZHhdLmNvbnRlbnQ7CiAgfQp9OwoKbWQuYmxvY2sucnVsZXIuYWZ0ZXIoJ2Jsb2NrcXVvdGUnLCAna2F0ZXhfYmxvY2snLCBrYXRleEhlbHBlci5rYXRleEJsb2NrLCB7CiAgYWx0OiBbJ3BhcmFncmFwaCcsICdyZWZlcmVuY2UnLCAnYmxvY2txdW90ZScsICdsaXN0J10KfSk7CgptZC5yZW5kZXJlci5ydWxlcy5rYXRleF9ibG9jayA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCkgewogIHRyeSB7CiAgICByZXR1cm4gIjxwPiIgKyBrYXRleC5yZW5kZXJUb1N0cmluZyh0b2tlbnNbaWR4XS5jb250ZW50LCB7CiAgICAgIGRpc3BsYXlNb2RlOiB0cnVlLAogICAgICBtYWNyb3M6IG1hY3JvcwogICAgfSkgKyAiPC9wPiI7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBjb25zb2xlLndhcm4oZXJyKTsKICAgIHJldHVybiB0b2tlbnNbaWR4XS5jb250ZW50OwogIH0KfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBUV0VNT0pJCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgptZC5yZW5kZXJlci5ydWxlcy5lbW9qaSA9IGZ1bmN0aW9uICh0b2tlbiwgaWR4KSB7CiAgcmV0dXJuIHR3ZW1vamkucGFyc2UodG9rZW5baWR4XS5jb250ZW50LCB7CiAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soaWNvbiwgb3B0cykgewogICAgICByZXR1cm4gIi9fYXNzZXRzL3N2Zy90d2Vtb2ppLyIgKyBpY29uICsgIi5zdmciOwogICAgfQogIH0pOwp9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIFZ1ZSBDb21wb25lbnQKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCnZhciBtZXJtYWlkSWQgPSAwOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgbWFya2Rvd25IZWxwOiBtYXJrZG93bkhlbHAKICB9LAogIHByb3BzOiB7CiAgICBzYXZlOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmFiSW5zZXJ0TWVudTogZmFsc2UsCiAgICAgIGNtOiBudWxsLAogICAgICBjdXJzb3JQb3M6IHsKICAgICAgICBjaDogMCwKICAgICAgICBsaW5lOiAxCiAgICAgIH0sCiAgICAgIHByZXZpZXdTaG93bjogdHJ1ZSwKICAgICAgcHJldmlld0hUTUw6ICcnLAogICAgICBoZWxwU2hvd246IGZhbHNlLAogICAgICBzcGVsbE1vZGVBY3RpdmU6IGZhbHNlLAogICAgICBpbnNlcnRMaW5rRGlhbG9nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc01vYmlsZTogZnVuY3Rpb24gaXNNb2JpbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQuc21BbmREb3duOwogICAgfSwKICAgIGlzTW9kYWxTaG93bjogZnVuY3Rpb24gaXNNb2RhbFNob3duKCkgewogICAgICByZXR1cm4gdGhpcy5oZWxwU2hvd24gfHwgdGhpcy5hY3RpdmVNb2RhbCAhPT0gJyc7CiAgICB9LAogICAgbG9jYWxlOiBnZXQoJ3BhZ2UvbG9jYWxlJyksCiAgICBwYXRoOiBnZXQoJ3BhZ2UvcGF0aCcpLAogICAgbW9kZTogZ2V0KCdlZGl0b3IvbW9kZScpLAogICAgYWN0aXZlTW9kYWw6IHN5bmMoJ2VkaXRvci9hY3RpdmVNb2RhbCcpCiAgfSwKICB3YXRjaDogewogICAgcHJldmlld1Nob3duOiBmdW5jdGlvbiBwcmV2aWV3U2hvd24obmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAobmV3VmFsdWUgJiYgIW9sZFZhbHVlKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMucmVuZGVyTWVybWFpZERpYWdyYW1zKCk7CgogICAgICAgICAgUHJpc20uaGlnaGxpZ2h0QWxsVW5kZXIoX3RoaXMuJHJlZnMuZWRpdG9yUHJldmlldyk7CiAgICAgICAgICBBcnJheS5mcm9tKF90aGlzLiRyZWZzLmVkaXRvclByZXZpZXcucXVlcnlTZWxlY3RvckFsbCgncHJlLmxpbmUtbnVtYmVycycpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHsKICAgICAgICAgICAgcmV0dXJuIHByZS5jbGFzc0xpc3QuYWRkKCdwcmlzbWpzJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNwZWxsTW9kZUFjdGl2ZTogZnVuY3Rpb24gc3BlbGxNb2RlQWN0aXZlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kcmVmcy5lZGl0b3JQcmV2aWV3LmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZU1vZGFsOiBmdW5jdGlvbiB0b2dnbGVNb2RhbChrZXkpIHsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IHRoaXMuYWN0aXZlTW9kYWwgPT09IGtleSA/ICcnIDoga2V5OwogICAgICB0aGlzLmhlbHBTaG93biA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlQWxsTW9kYWw6IGZ1bmN0aW9uIGNsb3NlQWxsTW9kYWwoKSB7CiAgICAgIHRoaXMuYWN0aXZlTW9kYWwgPSAnJzsKICAgICAgdGhpcy5oZWxwU2hvd24gPSBmYWxzZTsKICAgIH0sCiAgICBvbkNtSW5wdXQ6IF9kZWJvdW5jZShmdW5jdGlvbiAobmV3Q29udGVudCkgewogICAgICB0aGlzLnByb2Nlc3NDb250ZW50KG5ld0NvbnRlbnQpOwogICAgfSwgNjAwKSwKICAgIG9uQ21QYXN0ZTogZnVuY3Rpb24gb25DbVBhc3RlKGNtLCBldikgey8vIGNvbnN0IGNsaXBJdGVtcyA9IChldi5jbGlwYm9hcmREYXRhIHx8IGV2Lm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YSkuaXRlbXMKICAgICAgLy8gZm9yIChsZXQgY2xpcEl0ZW0gb2YgY2xpcEl0ZW1zKSB7CiAgICAgIC8vICAgaWYgKF8uc3RhcnRzV2l0aChjbGlwSXRlbS50eXBlLCAnaW1hZ2UvJykpIHsKICAgICAgLy8gICAgIGNvbnN0IGZpbGUgPSBjbGlwSXRlbS5nZXRBc0ZpbGUoKQogICAgICAvLyAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICAvLyAgICAgcmVhZGVyLm9ubG9hZCA9IGV2dCA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgbG9hZGluZ1N0YXJ0YCwgJ2VkaXRvci1wYXN0ZS1pbWFnZScpCiAgICAgIC8vICAgICAgIHRoaXMuaW5zZXJ0QWZ0ZXIoewogICAgICAvLyAgICAgICAgIGNvbnRlbnQ6IGAhWyR7ZmlsZS5uYW1lfV0oJHtldnQudGFyZ2V0LnJlc3VsdH0pYCwKICAgICAgLy8gICAgICAgICBuZXdMaW5lOiB0cnVlCiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKQogICAgICAvLyAgIH0KICAgICAgLy8gfQogICAgfSwKICAgIHByb2Nlc3NDb250ZW50OiBmdW5jdGlvbiBwcm9jZXNzQ29udGVudChuZXdDb250ZW50KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgbGluZXNNYXAgPSBbXTsgLy8gdGhpcy4kc3RvcmUuc2V0KCdlZGl0b3IvY29udGVudCcsIG5ld0NvbnRlbnQpCgogICAgICB0aGlzLnByb2Nlc3NNYXJrZXJzKHRoaXMuY20uZmlyc3RMaW5lKCksIHRoaXMuY20ubGFzdExpbmUoKSk7CiAgICAgIHRoaXMucHJldmlld0hUTUwgPSBET01QdXJpZnkuc2FuaXRpemUobWQucmVuZGVyKG5ld0NvbnRlbnQpLCB7CiAgICAgICAgQUREX1RBR1M6IFsnZm9yZWlnbk9iamVjdCddCiAgICAgIH0pOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdGFic2V0SGVscGVyLmZvcm1hdCgpOwoKICAgICAgICBfdGhpczMucmVuZGVyTWVybWFpZERpYWdyYW1zKCk7CgogICAgICAgIFByaXNtLmhpZ2hsaWdodEFsbFVuZGVyKF90aGlzMy4kcmVmcy5lZGl0b3JQcmV2aWV3KTsKICAgICAgICBBcnJheS5mcm9tKF90aGlzMy4kcmVmcy5lZGl0b3JQcmV2aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZS5saW5lLW51bWJlcnMnKSkuZm9yRWFjaChmdW5jdGlvbiAocHJlKSB7CiAgICAgICAgICByZXR1cm4gcHJlLmNsYXNzTGlzdC5hZGQoJ3ByaXNtanMnKTsKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMzLnNjcm9sbFN5bmMoX3RoaXMzLmNtKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICogVXBkYXRlIGN1cnNvciBzdGF0ZQogICAgICovCiAgICBwb3NpdGlvblN5bmM6IGZ1bmN0aW9uIHBvc2l0aW9uU3luYyhjbSkgewogICAgICB0aGlzLmN1cnNvclBvcyA9IGNtLmdldEN1cnNvcignaGVhZCcpOwogICAgfSwKCiAgICAvKioKICAgICAqIFdyYXAgc2VsZWN0aW9uIHdpdGggc3RhcnQgLyBlbmQgdGFncwogICAgICovCiAgICB0b2dnbGVNYXJrdXA6IGZ1bmN0aW9uIHRvZ2dsZU1hcmt1cChfcmVmKSB7CiAgICAgIHZhciBzdGFydCA9IF9yZWYuc3RhcnQsCiAgICAgICAgICBlbmQgPSBfcmVmLmVuZDsKCiAgICAgIGlmICghZW5kKSB7CiAgICAgICAgZW5kID0gc3RhcnQ7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5jbS5kb2Muc29tZXRoaW5nU2VsZWN0ZWQoKSkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6bWFya3VwLm5vU2VsZWN0aW9uRXJyb3InKSwKICAgICAgICAgIHN0eWxlOiAnd2FybmluZycsCiAgICAgICAgICBpY29uOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5jbS5kb2MucmVwbGFjZVNlbGVjdGlvbnModGhpcy5jbS5kb2MuZ2V0U2VsZWN0aW9ucygpLm1hcChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzdGFydCArIHMgKyBlbmQ7CiAgICAgIH0pKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTZXQgY3VycmVudCBsaW5lIGFzIGhlYWRlcgogICAgICovCiAgICBzZXRIZWFkZXJMaW5lOiBmdW5jdGlvbiBzZXRIZWFkZXJMaW5lKGx2bCkgewogICAgICB2YXIgY3VyTGluZSA9IHRoaXMuY20uZG9jLmdldEN1cnNvcignaGVhZCcpLmxpbmU7CiAgICAgIHZhciBsaW5lQ29udGVudCA9IHRoaXMuY20uZG9jLmdldExpbmUoY3VyTGluZSk7CiAgICAgIHZhciBsaW5lTGVuZ3RoID0gbGluZUNvbnRlbnQubGVuZ3RoOwoKICAgICAgaWYgKF9zdGFydHNXaXRoKGxpbmVDb250ZW50LCAnIycpKSB7CiAgICAgICAgbGluZUNvbnRlbnQgPSBsaW5lQ29udGVudC5yZXBsYWNlKC9eKCMrICkvLCAnJyk7CiAgICAgIH0KCiAgICAgIGxpbmVDb250ZW50ID0gX3RpbWVzKGx2bCwgZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gJyMnOwogICAgICB9KS5qb2luKCcnKSArICIgIiArIGxpbmVDb250ZW50OwogICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlUmFuZ2UobGluZUNvbnRlbnQsIHsKICAgICAgICBsaW5lOiBjdXJMaW5lLAogICAgICAgIGNoOiAwCiAgICAgIH0sIHsKICAgICAgICBsaW5lOiBjdXJMaW5lLAogICAgICAgIGNoOiBsaW5lTGVuZ3RoCiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEdldCB0aGUgaGVhZGVyIGxldmVyIG9mIHRoZSBjdXJyZW50IGxpbmUKICAgICAqLwogICAgZ2V0SGVhZGVyTGV2ZWw6IGZ1bmN0aW9uIGdldEhlYWRlckxldmVsKGNtKSB7CiAgICAgIHZhciBjdXJMaW5lID0gdGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCdoZWFkJykubGluZTsKICAgICAgdmFyIGxpbmVDb250ZW50ID0gdGhpcy5jbS5kb2MuZ2V0TGluZShjdXJMaW5lKTsKICAgICAgdmFyIGx2bCA9IDA7CiAgICAgIHZhciByZXN1bHQgPSBsaW5lQ29udGVudC5tYXRjaCgvXigjKykgLyk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgbHZsID0gX2dldChyZXN1bHQsICdbMV0nLCAnJykubGVuZ3RoOwogICAgICB9CgogICAgICByZXR1cm4gbHZsOwogICAgfSwKCiAgICAvKioKICAgICAqIEluc2VydCBjb250ZW50IGF0IGN1cnNvcgogICAgICovCiAgICBpbnNlcnRBdEN1cnNvcjogZnVuY3Rpb24gaW5zZXJ0QXRDdXJzb3IoX3JlZjIpIHsKICAgICAgdmFyIGNvbnRlbnQgPSBfcmVmMi5jb250ZW50OwogICAgICB2YXIgY3Vyc29yID0gdGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCdoZWFkJyk7CiAgICAgIHRoaXMuY20uZG9jLnJlcGxhY2VSYW5nZShjb250ZW50LCBjdXJzb3IpOwogICAgfSwKCiAgICAvKioKICAgICAqIEluc2VydCBjb250ZW50IGFmdGVyIGN1cnJlbnQgbGluZQogICAgICovCiAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoX3JlZjMpIHsKICAgICAgdmFyIGNvbnRlbnQgPSBfcmVmMy5jb250ZW50LAogICAgICAgICAgbmV3TGluZSA9IF9yZWYzLm5ld0xpbmU7CiAgICAgIHZhciBjdXJMaW5lID0gdGhpcy5jbS5kb2MuZ2V0Q3Vyc29yKCd0bycpLmxpbmU7CiAgICAgIHZhciBsaW5lTGVuZ3RoID0gdGhpcy5jbS5kb2MuZ2V0TGluZShjdXJMaW5lKS5sZW5ndGg7CiAgICAgIHRoaXMuY20uZG9jLnJlcGxhY2VSYW5nZShuZXdMaW5lID8gIlxuIiArIGNvbnRlbnQgKyAiXG4iIDogY29udGVudCwgewogICAgICAgIGxpbmU6IGN1ckxpbmUsCiAgICAgICAgY2g6IGxpbmVMZW5ndGggKyAxCiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEluc2VydCBjb250ZW50IGJlZm9yZSBjdXJyZW50IGxpbmUKICAgICAqLwogICAgaW5zZXJ0QmVmb3JlRWFjaExpbmU6IGZ1bmN0aW9uIGluc2VydEJlZm9yZUVhY2hMaW5lKF9yZWY0KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGNvbnRlbnQgPSBfcmVmNC5jb250ZW50LAogICAgICAgICAgYWZ0ZXIgPSBfcmVmNC5hZnRlcjsKICAgICAgdmFyIGxpbmVzID0gW107CgogICAgICBpZiAoIXRoaXMuY20uZG9jLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHsKICAgICAgICBsaW5lcy5wdXNoKHRoaXMuY20uZG9jLmdldEN1cnNvcignaGVhZCcpLmxpbmUpOwogICAgICB9IGVsc2UgewogICAgICAgIGxpbmVzID0gX2ZsYXR0ZW4odGhpcy5jbS5kb2MubGlzdFNlbGVjdGlvbnMoKS5tYXAoZnVuY3Rpb24gKHNsKSB7CiAgICAgICAgICB2YXIgcmFuZ2UgPSBNYXRoLmFicyhzbC5hbmNob3IubGluZSAtIHNsLmhlYWQubGluZSkgKyAxOwogICAgICAgICAgdmFyIGxvd2VzdExpbmUgPSBzbC5hbmNob3IubGluZSA+IHNsLmhlYWQubGluZSA/IHNsLmhlYWQubGluZSA6IHNsLmFuY2hvci5saW5lOwogICAgICAgICAgcmV0dXJuIF90aW1lcyhyYW5nZSwgZnVuY3Rpb24gKGwpIHsKICAgICAgICAgICAgcmV0dXJuIGwgKyBsb3dlc3RMaW5lOwogICAgICAgICAgfSk7CiAgICAgICAgfSkpOwogICAgICB9CgogICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsbikgewogICAgICAgIHZhciBsaW5lQ29udGVudCA9IF90aGlzNC5jbS5kb2MuZ2V0TGluZShsbik7CgogICAgICAgIHZhciBsaW5lTGVuZ3RoID0gbGluZUNvbnRlbnQubGVuZ3RoOwoKICAgICAgICBpZiAoX3N0YXJ0c1dpdGgobGluZUNvbnRlbnQsIGNvbnRlbnQpKSB7CiAgICAgICAgICBsaW5lQ29udGVudCA9IGxpbmVDb250ZW50LnN1YnN0cmluZyhjb250ZW50Lmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczQuY20uZG9jLnJlcGxhY2VSYW5nZShjb250ZW50ICsgbGluZUNvbnRlbnQsIHsKICAgICAgICAgIGxpbmU6IGxuLAogICAgICAgICAgY2g6IDAKICAgICAgICB9LCB7CiAgICAgICAgICBsaW5lOiBsbiwKICAgICAgICAgIGNoOiBsaW5lTGVuZ3RoCiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgaWYgKGFmdGVyKSB7CiAgICAgICAgdmFyIGxhc3RMaW5lID0gX2xhc3QobGluZXMpOwoKICAgICAgICB0aGlzLmNtLmRvYy5yZXBsYWNlUmFuZ2UoIlxuIiArIGFmdGVyICsgIlxuIiwgewogICAgICAgICAgbGluZTogbGFzdExpbmUsCiAgICAgICAgICBjaDogdGhpcy5jbS5kb2MuZ2V0TGluZShsYXN0TGluZSkubGVuZ3RoICsgMQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICogVXBkYXRlIHNjcm9sbCBzeW5jCiAgICAgKi8KICAgIHNjcm9sbFN5bmM6IF9kZWJvdW5jZShmdW5jdGlvbiAoY20pIHsKICAgICAgaWYgKCF0aGlzLnByZXZpZXdTaG93biB8fCBjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VycmVudExpbmUgPSBjbS5nZXRDdXJzb3IoKS5saW5lOwoKICAgICAgaWYgKGN1cnJlbnRMaW5lIDwgMykgewogICAgICAgIHRoaXMuVmVsb2NpdHkodGhpcy4kcmVmcy5lZGl0b3JQcmV2aWV3LCAnc3RvcCcsIHRydWUpOwogICAgICAgIHRoaXMuVmVsb2NpdHkodGhpcy4kcmVmcy5lZGl0b3JQcmV2aWV3LmZpcnN0Q2hpbGQsICdzY3JvbGwnLCB7CiAgICAgICAgICBvZmZzZXQ6ICctNTAnLAogICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICBjb250YWluZXI6IHRoaXMuJHJlZnMuZWRpdG9yUHJldmlld0NvbnRhaW5lcgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjbG9zZXN0TGluZSA9IF9maW5kTGFzdChsaW5lc01hcCwgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiBuIDw9IGN1cnJlbnRMaW5lOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgZGVzdEVsbSA9IHRoaXMuJHJlZnMuZWRpdG9yUHJldmlldy5xdWVyeVNlbGVjdG9yKCJbZGF0YS1saW5lPSciICsgY2xvc2VzdExpbmUgKyAiJ10iKTsKCiAgICAgICAgaWYgKGRlc3RFbG0pIHsKICAgICAgICAgIHRoaXMuVmVsb2NpdHkodGhpcy4kcmVmcy5lZGl0b3JQcmV2aWV3LCAnc3RvcCcsIHRydWUpOwogICAgICAgICAgdGhpcy5WZWxvY2l0eShkZXN0RWxtLCAnc2Nyb2xsJywgewogICAgICAgICAgICBvZmZzZXQ6ICctMTAwJywKICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsCiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5lZGl0b3JQcmV2aWV3Q29udGFpbmVyCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIDUwMCksCiAgICB0b2dnbGVIZWxwOiBmdW5jdGlvbiB0b2dnbGVIZWxwKCkgewogICAgICB0aGlzLmhlbHBTaG93biA9ICF0aGlzLmhlbHBTaG93bjsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9ICcnOwogICAgfSwKICAgIHRvZ2dsZUZ1bGxzY3JlZW46IGZ1bmN0aW9uIHRvZ2dsZUZ1bGxzY3JlZW4oKSB7CiAgICAgIHRoaXMuY20uc2V0T3B0aW9uKCdmdWxsU2NyZWVuJywgdHJ1ZSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LmNtLnJlZnJlc2goKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVuZGVyTWVybWFpZERpYWdyYW1zOiBmdW5jdGlvbiByZW5kZXJNZXJtYWlkRGlhZ3JhbXMoKSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0b3ItbWFya2Rvd24tcHJldmlldyBwcmUuY29kZWJsb2NrLW1lcm1haWQgPiBjb2RlJykuZm9yRWFjaChmdW5jdGlvbiAoZWxtKSB7CiAgICAgICAgbWVybWFpZElkKys7CiAgICAgICAgdmFyIG1lcm1haWREZWYgPSBlbG0uaW5uZXJUZXh0OwogICAgICAgIHZhciBtbUVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG1tRWxtLmlubmVySFRNTCA9ICI8ZGl2IGlkPVwibWVybWFpZC1pZC0iICsgbWVybWFpZElkICsgIlwiPiIgKyBtZXJtYWlkLnJlbmRlcigibWVybWFpZC1pZC0iICsgbWVybWFpZElkLCBtZXJtYWlkRGVmKSArICI8L2Rpdj4iOwogICAgICAgIGVsbS5wYXJlbnRFbGVtZW50LnJlcGxhY2VXaXRoKG1tRWxtKTsKICAgICAgfSk7CiAgICB9LAogICAgYXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBhdXRvY29tcGxldGUoY20sIGNoYW5nZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmIChjbS5nZXRNb2RlQXQoY20uZ2V0Q3Vyc29yKCkpLm5hbWUgIT09ICdtYXJrZG93bicpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gTGlua3MKCgogICAgICBpZiAoY2hhbmdlLnRleHRbMF0gPT09ICcoJykgewogICAgICAgIHZhciBjdXJMaW5lID0gY20uZ2V0TGluZShjaGFuZ2UuZnJvbS5saW5lKS5zdWJzdHJpbmcoMCwgY2hhbmdlLmZyb20uY2gpOwoKICAgICAgICBpZiAoY3VyTGluZVtjdXJMaW5lLmxlbmd0aCAtIDFdID09PSAnXScpIHsKICAgICAgICAgIGNtLnNob3dIaW50KHsKICAgICAgICAgICAgaGludDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfaGludCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShjbSwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIGN1ciwgY3VyTGluZSwgcXVlcnlTdHJpbmcsIHRva2VuLCByZXNwUmF3LCByZXNwOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBjdXIgPSBjbS5nZXRDdXJzb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9IGNtLmdldExpbmUoY3VyLmxpbmUpLnN1YnN0cmluZygwLCBjdXIuY2gpOwogICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyA9IGN1ckxpbmUuc3Vic3RyaW5nKGN1ckxpbmUubGFzdEluZGV4T2YoJ1snKSArIDEsIGN1ckxpbmUubGVuZ3RoIC0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gY20uZ2V0VG9rZW5BdChjdXIpOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuJGFwb2xsby5xdWVyeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIkRvY3VtZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkZWZpbml0aW9ucyI6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk9wZXJhdGlvbkRlZmluaXRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3BlcmF0aW9uIjogInF1ZXJ5IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhcmlhYmxlRGVmaW5pdGlvbnMiOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIlZhcmlhYmxlRGVmaW5pdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhcmlhYmxlIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiVmFyaWFibGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAicXVlcnkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk5vbk51bGxUeXBlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lZFR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAiU3RyaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGlyZWN0aXZlcyI6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJWYXJpYWJsZURlZmluaXRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2YXJpYWJsZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIlZhcmlhYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogImxvY2FsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZWRUeXBlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogIlN0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzZWxlY3Rpb25TZXQiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU2VsZWN0aW9uU2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2VsZWN0aW9ucyI6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJGaWVsZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6ICJwYWdlcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJndW1lbnRzIjogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGlyZWN0aXZlcyI6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbGVjdGlvblNldCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU2VsZWN0aW9uU2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbGVjdGlvbnMiOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIkZpZWxkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogInNlYXJjaCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudHMiOiBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiQXJndW1lbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAicXVlcnkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJWYXJpYWJsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIk5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6ICJxdWVyeSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIkFyZ3VtZW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogImxvY2FsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIlZhcmlhYmxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogImxvY2FsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbGVjdGlvblNldCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIlNlbGVjdGlvblNldCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2VsZWN0aW9ucyI6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIkZpZWxkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogInJlc3VsdHMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudHMiOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpcmVjdGl2ZXMiOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbGVjdGlvblNldCI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJTZWxlY3Rpb25TZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzZWxlY3Rpb25zIjogW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJraW5kIjogIkZpZWxkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZhbHVlIjogInRpdGxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudHMiOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJGaWVsZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6ICJwYXRoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudHMiOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJGaWVsZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ2YWx1ZSI6ICJsb2NhbGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3VtZW50cyI6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpcmVjdGl2ZXMiOiBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiRmllbGQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidmFsdWUiOiAidG90YWxIaXRzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXJndW1lbnRzIjogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkaXJlY3RpdmVzIjogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImxvYyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN0YXJ0IjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImVuZCI6IDQ0OSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYm9keSI6ICJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgKCRxdWVyeTogU3RyaW5nISwgJGxvY2FsZTogU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFnZXMge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoKHF1ZXJ5OiRxdWVyeSwgbG9jYWxlOiRsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxIaXRzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogIkdyYXBoUUwgcmVxdWVzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxvY2F0aW9uT2Zmc2V0IjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxpbmUiOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNvbHVtbiI6IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5U3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBfdGhpczYubG9jYWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogJ2NhY2hlLWZpcnN0JwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BSYXcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICByZXNwID0gX2dldChyZXNwUmF3LCAnZGF0YS5wYWdlcy5zZWFyY2gnLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwICYmIHJlc3AudG90YWxIaXRzID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiByZXNwLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnKCcgKyAoc2l0ZUxhbmdzLmxlbmd0aCA+IDAgPyAiLyIgKyByLmxvY2FsZSArICIvIiArIHIucGF0aCA6ICIvIiArIHIucGF0aCkgKyAnKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0OiBzaXRlTGFuZ3MubGVuZ3RoID4gMCA/ICIvIiArIHIubG9jYWxlICsgIi8iICsgci5wYXRoICsgIiAtICIgKyByLnRpdGxlIDogIi8iICsgci5wYXRoICsgIiAtICIgKyByLnRpdGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5zdGFydCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdG86IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5lbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uc3RhcnQpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uZW5kKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNCwgMTNdXSk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBmdW5jdGlvbiBoaW50KF94LCBfeDIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfaGludC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIGhpbnQ7CiAgICAgICAgICAgIH0oKQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaW5zZXJ0TGluazogZnVuY3Rpb24gaW5zZXJ0TGluaygpIHsKICAgICAgdGhpcy5pbnNlcnRMaW5rRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBpbnNlcnRMaW5rSGFuZGxlcjogZnVuY3Rpb24gaW5zZXJ0TGlua0hhbmRsZXIoX3JlZjUpIHsKICAgICAgdmFyIGxvY2FsZSA9IF9yZWY1LmxvY2FsZSwKICAgICAgICAgIHBhdGggPSBfcmVmNS5wYXRoOwoKICAgICAgdmFyIGxhc3RQYXJ0ID0gX2xhc3QocGF0aC5zcGxpdCgnLycpKTsKCiAgICAgIHRoaXMuaW5zZXJ0QXRDdXJzb3IoewogICAgICAgIGNvbnRlbnQ6IHNpdGVMYW5ncy5sZW5ndGggPiAwID8gIlsiICsgbGFzdFBhcnQgKyAiXSgvIiArIGxvY2FsZSArICIvIiArIHBhdGggKyAiKSIgOiAiWyIgKyBsYXN0UGFydCArICJdKC8iICsgcGF0aCArICIpIgogICAgICB9KTsKICAgIH0sCiAgICBwcm9jZXNzTWFya2VyczogZnVuY3Rpb24gcHJvY2Vzc01hcmtlcnMoZnJvbSwgdG8pIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgZm91bmQgPSBudWxsOwogICAgICB2YXIgZm91bmRTdGFydCA9IDA7CiAgICAgIHRoaXMuY20uZG9jLmdldEFsbE1hcmtzKCkuZm9yRWFjaChmdW5jdGlvbiAobWspIHsKICAgICAgICBpZiAobWsuX19raW5kKSB7CiAgICAgICAgICBtay5jbGVhcigpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuY20uZWFjaExpbmUoZnJvbSwgdG8sIGZ1bmN0aW9uIChsbikgewogICAgICAgIHZhciBsaW5lID0gbG4ubGluZU5vKCk7CgogICAgICAgIGlmIChsbi50ZXh0LnN0YXJ0c1dpdGgoJ2BgYGRpYWdyYW0nKSkgewogICAgICAgICAgZm91bmQgPSAnZGlhZ3JhbSc7CiAgICAgICAgICBmb3VuZFN0YXJ0ID0gbGluZTsKICAgICAgICB9IGVsc2UgaWYgKGxuLnRleHQgPT09ICdgYGAnICYmIGZvdW5kKSB7CiAgICAgICAgICBzd2l0Y2ggKGZvdW5kKSB7CiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAvLyAtPiBESUFHUkFNCiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICBjYXNlICdkaWFncmFtJzoKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobGluZSAtIGZvdW5kU3RhcnQgIT09IDIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNy5hZGRNYXJrZXIoewogICAgICAgICAgICAgICAgICBraW5kOiAnZGlhZ3JhbScsCiAgICAgICAgICAgICAgICAgIGZyb206IHsKICAgICAgICAgICAgICAgICAgICBsaW5lOiBmb3VuZFN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGNoOiAzCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHRvOiB7CiAgICAgICAgICAgICAgICAgICAgbGluZTogZm91bmRTdGFydCwKICAgICAgICAgICAgICAgICAgICBjaDogMTAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgdGV4dDogJ0VkaXQgRGlhZ3JhbScsCiAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2KSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY20uZG9jLnNldFNlbGVjdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IHN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICBjaDogMAogICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBlbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNoOiAzCiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF3ID0gX3RoaXM3LmNtLmRvYy5nZXRMaW5lKGVuZCAtIDEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LiRzdG9yZS5zZXQoJ2VkaXRvci9hY3RpdmVNb2RhbERhdGEnLCBCdWZmZXIuZnJvbShyYXcsICdiYXNlNjQnKS50b1N0cmluZygpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy50b2dnbGVNb2RhbCgiZWRpdG9yTW9kYWxEcmF3aW8iKTsKICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwcm9jZXNzIGRpYWdyYW0gZGF0YS4nLAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0oZm91bmRTdGFydCwgbGluZSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChsbi5oZWlnaHQgPiAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5jbS5mb2xkQ29kZShmb3VuZFN0YXJ0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZm91bmQgPSBudWxsOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIoX3JlZjYpIHsKICAgICAgdmFyIGtpbmQgPSBfcmVmNi5raW5kLAogICAgICAgICAgZnJvbSA9IF9yZWY2LmZyb20sCiAgICAgICAgICB0byA9IF9yZWY2LnRvLAogICAgICAgICAgdGV4dCA9IF9yZWY2LnRleHQsCiAgICAgICAgICBhY3Rpb24gPSBfcmVmNi5hY3Rpb247CiAgICAgIHZhciBtYXJrZXJFbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgIG1hcmtlckVsbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7CiAgICAgIG1hcmtlckVsbS5jbGFzc05hbWUgPSAnQ29kZU1pcnJvci1idXR0b25tYXJrZXInOwogICAgICBtYXJrZXJFbG0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3Rpb24pOwogICAgICB0aGlzLmNtLm1hcmtUZXh0KGZyb20sIHRvLCB7CiAgICAgICAgcmVwbGFjZWRXaXRoOiBtYXJrZXJFbG0sCiAgICAgICAgX19raW5kOiBraW5kCiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgIHRoaXMuJHN0b3JlLnNldCgnZWRpdG9yL2VkaXRvcktleScsICdtYXJrZG93bicpOwoKICAgIGlmICh0aGlzLm1vZGUgPT09ICdjcmVhdGUnICYmICF0aGlzLiRzdG9yZS5nZXQoJ2VkaXRvci9jb250ZW50JykpIHsKICAgICAgdGhpcy4kc3RvcmUuc2V0KCdlZGl0b3IvY29udGVudCcsICcjIEhlYWRlclxuWW91ciBjb250ZW50IGhlcmUnKTsKICAgIH0gLy8gSW5pdGlhbGl6ZSBNZXJtYWlkIEFQSQoKCiAgICBtZXJtYWlkLmluaXRpYWxpemUoewogICAgICBzdGFydE9uTG9hZDogZmFsc2UsCiAgICAgIHRoZW1lOiB0aGlzLiR2dWV0aWZ5LnRoZW1lLmRhcmsgPyAiZGFyayIgOiAiZGVmYXVsdCIKICAgIH0pOyAvLyBJbml0aWFsaXplIENvZGVNaXJyb3IKCiAgICB0aGlzLmNtID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEodGhpcy4kcmVmcy5jbSwgewogICAgICB0YWJTaXplOiAyLAogICAgICBtb2RlOiAndGV4dC9tYXJrZG93bicsCiAgICAgIHRoZW1lOiAnd2lraWpzLWRhcmsnLAogICAgICBsaW5lTnVtYmVyczogdHJ1ZSwKICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgICBsaW5lOiB0cnVlLAogICAgICBzdHlsZUFjdGl2ZUxpbmU6IHRydWUsCiAgICAgIGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXM6IHsKICAgICAgICBhbm5vdGF0ZVNjcm9sbGJhcjogdHJ1ZQogICAgICB9LAogICAgICB2aWV3cG9ydE1hcmdpbjogNTAsCiAgICAgIGlucHV0U3R5bGU6ICdjb250ZW50ZWRpdGFibGUnLAogICAgICBhbGxvd0Ryb3BGaWxlVHlwZXM6IFsnaW1hZ2UvanBnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9zdmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9naWYnXSwKICAgICAgZGlyZWN0aW9uOiBzaXRlQ29uZmlnLnJ0bCA/ICdydGwnIDogJ2x0cicsCiAgICAgIGZvbGRHdXR0ZXI6IHRydWUsCiAgICAgIGd1dHRlcnM6IFsnQ29kZU1pcnJvci1saW5lbnVtYmVycycsICdDb2RlTWlycm9yLWZvbGRndXR0ZXInXQogICAgfSk7CiAgICB0aGlzLmNtLnNldFZhbHVlKHRoaXMuJHN0b3JlLmdldCgnZWRpdG9yL2NvbnRlbnQnKSk7CiAgICB0aGlzLmNtLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoYykgewogICAgICBfdGhpczguJHN0b3JlLnNldCgnZWRpdG9yL2NvbnRlbnQnLCBjLmdldFZhbHVlKCkpOwoKICAgICAgX3RoaXM4Lm9uQ21JbnB1dChfdGhpczguJHN0b3JlLmdldCgnZWRpdG9yL2NvbnRlbnQnKSk7CiAgICB9KTsKCiAgICBpZiAodGhpcy4kdnVldGlmeS5icmVha3BvaW50Lm1kQW5kVXApIHsKICAgICAgdGhpcy5jbS5zZXRTaXplKG51bGwsICdjYWxjKDEwMHZoIC0gMTEycHggLSAyNHB4KScpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jbS5zZXRTaXplKG51bGwsICdjYWxjKDEwMHZoIC0gMTEycHggLSAxNnB4KScpOwogICAgfSAvLyBTZXQgS2V5YmluZGluZ3MKCgogICAgdmFyIGtleUJpbmRpbmdzID0gewogICAgICAnRjExJzogZnVuY3Rpb24gRjExKGMpIHsKICAgICAgICBjLnNldE9wdGlvbignZnVsbFNjcmVlbicsICFjLmdldE9wdGlvbignZnVsbFNjcmVlbicpKTsKICAgICAgfSwKICAgICAgJ0VzYyc6IGZ1bmN0aW9uIEVzYyhjKSB7CiAgICAgICAgaWYgKGMuZ2V0T3B0aW9uKCdmdWxsU2NyZWVuJykpIGMuc2V0T3B0aW9uKCdmdWxsU2NyZWVuJywgZmFsc2UpOwogICAgICB9CiAgICB9OwoKICAgIF9zZXQoa2V5QmluZGluZ3MsIEN0cmxLZXkgKyAiLVMiLCBmdW5jdGlvbiAoYykgewogICAgICBfdGhpczguc2F2ZSgpOwoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgX3NldChrZXlCaW5kaW5ncywgQ3RybEtleSArICItQiIsIGZ1bmN0aW9uIChjKSB7CiAgICAgIF90aGlzOC50b2dnbGVNYXJrdXAoewogICAgICAgIHN0YXJ0OiAiKioiCiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgX3NldChrZXlCaW5kaW5ncywgQ3RybEtleSArICItSSIsIGZ1bmN0aW9uIChjKSB7CiAgICAgIF90aGlzOC50b2dnbGVNYXJrdXAoewogICAgICAgIHN0YXJ0OiAiKiIKICAgICAgfSk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKCiAgICBfc2V0KGtleUJpbmRpbmdzLCBDdHJsS2V5ICsgIi1BbHQtUmlnaHQiLCBmdW5jdGlvbiAoYykgewogICAgICB2YXIgbHZsID0gX3RoaXM4LmdldEhlYWRlckxldmVsKGMpOwoKICAgICAgaWYgKGx2bCA+PSA2KSB7CiAgICAgICAgbHZsID0gNTsKICAgICAgfQoKICAgICAgX3RoaXM4LnNldEhlYWRlckxpbmUobHZsICsgMSk7CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKCiAgICBfc2V0KGtleUJpbmRpbmdzLCBDdHJsS2V5ICsgIi1BbHQtTGVmdCIsIGZ1bmN0aW9uIChjKSB7CiAgICAgIHZhciBsdmwgPSBfdGhpczguZ2V0SGVhZGVyTGV2ZWwoYyk7CgogICAgICBpZiAobHZsIDw9IDEpIHsKICAgICAgICBsdmwgPSAyOwogICAgICB9CgogICAgICBfdGhpczguc2V0SGVhZGVyTGluZShsdmwgLSAxKTsKCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuY20uc2V0T3B0aW9uKCdleHRyYUtleXMnLCBrZXlCaW5kaW5ncyk7CiAgICB0aGlzLmNtLm9uKCdpbnB1dFJlYWQnLCB0aGlzLmF1dG9jb21wbGV0ZSk7IC8vIEhhbmRsZSBjdXJzb3IgbW92ZW1lbnQKCiAgICB0aGlzLmNtLm9uKCdjdXJzb3JBY3Rpdml0eScsIGZ1bmN0aW9uIChjKSB7CiAgICAgIF90aGlzOC5wb3NpdGlvblN5bmMoYyk7CgogICAgICBfdGhpczguc2Nyb2xsU3luYyhjKTsKICAgIH0pOyAvLyBIYW5kbGUgc3BlY2lhbCBwYXN0ZQoKICAgIHRoaXMuY20ub24oJ3Bhc3RlJywgdGhpcy5vbkNtUGFzdGUpOyAvLyBSZW5kZXIgaW5pdGlhbCBwcmV2aWV3CgogICAgdGhpcy5wcm9jZXNzQ29udGVudCh0aGlzLiRzdG9yZS5nZXQoJ2VkaXRvci9jb250ZW50JykpOwogICAgdGhpcy5yZWZyZXNoKCk7CiAgICB0aGlzLiRyb290LiRvbignZWRpdG9ySW5zZXJ0JywgZnVuY3Rpb24gKG9wdHMpIHsKICAgICAgc3dpdGNoIChvcHRzLmtpbmQpIHsKICAgICAgICBjYXNlICdJTUFHRSc6CiAgICAgICAgICB2YXIgaW1nID0gIiFbIiArIG9wdHMudGV4dCArICJdKCIgKyBvcHRzLnBhdGggKyAiKSI7CgogICAgICAgICAgaWYgKG9wdHMuYWxpZ24gJiYgb3B0cy5hbGlnbiAhPT0gJycpIHsKICAgICAgICAgICAgaW1nICs9ICJ7LmFsaWduLSIgKyBvcHRzLmFsaWduICsgIn0iOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzOC5pbnNlcnRBdEN1cnNvcih7CiAgICAgICAgICAgIGNvbnRlbnQ6IGltZwogICAgICAgICAgfSk7CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0JJTkFSWSc6CiAgICAgICAgICBfdGhpczguaW5zZXJ0QXRDdXJzb3IoewogICAgICAgICAgICBjb250ZW50OiAiWyIgKyBvcHRzLnRleHQgKyAiXSgiICsgb3B0cy5wYXRoICsgIikiCiAgICAgICAgICB9KTsKCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnRElBR1JBTSc6CiAgICAgICAgICB2YXIgc2VsU3RhcnRMaW5lID0gX3RoaXM4LmNtLmdldEN1cnNvcignZnJvbScpLmxpbmU7CgogICAgICAgICAgdmFyIHNlbEVuZExpbmUgPSBfdGhpczguY20uZ2V0Q3Vyc29yKCd0bycpLmxpbmUgKyAxOwoKICAgICAgICAgIF90aGlzOC5jbS5kb2MucmVwbGFjZVNlbGVjdGlvbignYGBgZGlhZ3JhbVxuJyArIG9wdHMudGV4dCArICdcbmBgYFxuJywgJ3N0YXJ0Jyk7CgogICAgICAgICAgX3RoaXM4LnByb2Nlc3NNYXJrZXJzKHNlbFN0YXJ0TGluZSwgc2VsRW5kTGluZSk7CgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOyAvLyBIYW5kbGUgc2F2ZSBjb25mbGljdAoKICAgIHRoaXMuJHJvb3QuJG9uKCdzYXZlQ29uZmxpY3QnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzOC50b2dnbGVNb2RhbCgiZWRpdG9yTW9kYWxDb25mbGljdCIpOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbignb3ZlcndyaXRlRWRpdG9yQ29udGVudCcsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXM4LmNtLnNldFZhbHVlKF90aGlzOC4kc3RvcmUuZ2V0KCdlZGl0b3IvY29udGVudCcpKTsKICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJHJvb3QuJG9mZignZWRpdG9ySW5zZXJ0Jyk7CiAgfQp9Ow=="},null]}